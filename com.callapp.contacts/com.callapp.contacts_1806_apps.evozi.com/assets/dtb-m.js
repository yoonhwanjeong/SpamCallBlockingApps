/*! dtb-m.js - v2.5.0 - 2020-04-27 15:27:58 */!function(t){var i={};function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=0)}([function(e,n,t){function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.forEach(function(e){o(n,e,t[e])})}return n}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var J=t(1);window.amzn=window.amzn||{},window.amzn.dtb=window.amzn.dtb||{},function(v){var t=!1,h=!1,a="aax-us-east.amazon-adsystem.com",d=null,s=null,l="https://",c="__dtbAd__",b="apsAdIframe",y=/linux.*android.*?/g.test(window.navigator.userAgent.toLowerCase()),E=/(iphone|ipod|ipad).*applewebkit.*?/g.test(window.navigator.userAgent.toLowerCase());v.sdkType="unknown";var n="https://c.amazon-adsystem.com/bao-csm/mobile/csm.js.gz",o={nike:{rate:1,currentlySampling:!1},apsLibraryError:{rate:10,currentlySampling:!1},gmaSDK:{rate:1,currentlySampling:!1},deepLink:{rate:1,currentlySampling:!1},adRendering:{rate:1,currentlySampling:!1}},i={networkCalls:{pixels:[],imp:[]},logs:[]},r=!1,u=!1;_(!(v.log=function(){for(var e="",n=0;n<arguments.length;n++)e+=arguments[n]+" ",t&&console&&console.log&&!h&&console.log(e);i.logs.push(e)}));var p,g=(p=!1,{impRendered:function(){var e=f(1);x.send(e,d)},mraid3Comparison:function(){o.nike.currentlySampling&&"3.0"===mraid.getVersion()&&(mraid.addEventListener("viewableChange",m),mraid.addEventListener("exposureChange",w),m())}});function m(){if(mraid.isViewable()&&!p){var e=f(2);x.send(e,d),p=!0,window.mraid.removeEventListener("viewableChange",m)}}function w(e){if(1<=e){var n=f(3);x.send(n,d),window.mraid.removeEventListener("exposureChange",w)}}function f(e){return{p:e,_type:"nike"}}function S(e){return e&&"string"==typeof e&&0<e.trim().length}var x={send:function(e,n){try{I(n?M(e,n):k(e))}catch(e){console.log(e)}},getUrl:function(e,n){try{return n?M(e,n):k(e)}catch(e){return console.log(e),null}}};function z(e){var n=JSON.stringify(function(e){return F({},{lv:"2.5.0",ts:t?0:Date.now(),_tl:"aps-mtag"},e)}(e));return n=function(e){return e.replace(/\\.{1}/g,"")}(n),n=encodeURIComponent(n)}function L(){return l+a+"/x/px/"}function I(e){(new Image).src=e,i.networkCalls.pixels.push(e),v.log("Pixel sent: ".concat(e))}function k(e){return L()+"p/PH/"+z(e)+A()}function M(e,n){return L()+n+"/"+z(e)+A()}function A(){return"?cb="+(t?0:Math.round(1e7*Math.random()))}function C(e,n){var t=1<arguments.length&&void 0!==n?n:{},i=JSON.stringify(F({},t));v.log("".concat(e," pixel evaluation: ").concat(i)),o[e].currentlySampling&&(x.send(F({_type:e},t),d),t.e&&"iFrameSize"===t.e.et&&(u=!0))}function O(e){try{var n=parseInt(e,10);if(!isNaN(n)){if(n<=0)return!1;if(100<=n)return!0;if(100*Math.random()<=n)return!0}return!1}catch(e){return!1}}function _(e){for(var n in o)o.hasOwnProperty(n)&&(o[n].currentlySampling=!!e||O(o[n].sampleRate))}function D(){if(r)v.log("Impression pixel already fired.");else{v.log("Firing impression on viewable event, with Pricepoint",s,"and bidId:",d);var e=l+a+"/e/msdk/imp?b="+d+"&ps="+s+"&rnd="+Math.floor(1e5*Math.random()+1);(new Image).src=e,i.networkCalls.imp.push(e),r=!0,C("adRendering",{adrendering:window.location.host})}}function R(e){var n='{"adViewability":[{"error": {"m": "'+e+'"}}], "c": "viewability", "api": "MAPP", "error": 1}';(new Image).src=l+a+"/x/px/"+d+"/"+n+"?cb="+Math.round(1e7*Math.random())}function V(){if(!("mraid"in window))return v.log("Error","Mraid object not found, impression will not be made."),void v.log('Please include \'<script type="text/javascript" src="mraid.js"><\/script>\' in your creative.');v.log("Registering impression rendered event, with Pricepoint",s,"and bidId:",d),g.impRendered();function e(){mraid.isViewable()&&(window.addEventListener("resize",T),T())}mraid.addEventListener("viewableChange",e),e(),function(){if(!0===v.ev){v.log("Injecting viewability script");var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=function(){if(v.log("Viewability script loaded"),window.amzncsm&&"function"==typeof window.amzncsm.rmRM){var e,n=document.getElementById(c);if(n){var t=n.getElementsByTagName("iframe");t&&0<t.length&&(e=t[0])}window.amzncsm.host=a,e?window.amzncsm.rmRM(d,e):R("ad iframe not found")}else R("amzncsm.rmRM is not a function")},e.onerror=function(){R("CSM JS loading failed")},e.src=n,document.body.appendChild(e),v.log("Viewability script injected")}}(),g.mraid3Comparison(),P()&&C("gmaSDK",{gmaversion:window.MRAID_ENV.sdkVersion})}function j(){if(E){var e=window.navigator.userAgent.match(/OS [0-9]+/g);return!!e&&13<=parseInt(e[0].match(/[0-9]+/g)[0],10)}return!1}function P(){return!("3.0"!==mraid.getVersion()||!window.MRAID_ENV||"Google Mobile Ads"!==window.MRAID_ENV.sdk||!window.MRAID_ENV.sdkVersion)}function T(){window.removeEventListener("resize",T);var e=document.getElementById(c),n=window.document.getElementById(b),t=window.getComputedStyle(n),i=parseInt(t.width,10),o=parseInt(t.height,10),r=!0;if(v.log("iFrame measured at ".concat(i,"x").concat(o)),i<300||o<50?(r=!1,u||C("apsLibraryError",{e:{et:"iFrameSize",msg:"".concat(i,"x").concat(o)}})):u&&x.send({_type:"iFrameSizeValid",size:"".concat(i,"x").concat(o)},d),N(e))return r?void D():void window.addEventListener("resize",T);r||window.addEventListener("resize",T),D()}v.dispatchAppEvent=function(e,n,t,i,o){if("fb"===i)try{admob.events.dispatchAppEvent("mDTB","facebook")}catch(e){C("apsLibraryError",{e:{et:"mdtb-ad-rendering",msg:"admob/fb"}})}else v.loadAd(e,n,t,o)},v.toggleDebug=function(e){switch(e){case"enable":return t=!0,void 0===window.amznDebugState&&(window.amznDebugState=i),_(!0),v.log("Debug mode enabled");case"disable":return t=!1,void 0!==window.amznDebugState&&delete window.amznDebugState,_(!1),v.log("Debug mode disabled");case"unitTests":return h=!0,v.log("Disabling my.log console logs showing in unit tests");default:return v.log("unknown debug argument")}},v.loadAd=function(e,n,t,i){if(arguments.length<2)console.error("amzn.dtb.loadAd is not called with sufficient number of arguments.");else if(i&&(v.toggleDebug("enable"),v.log("Enabling debug mode, now all logs will be printed & http will used for connection.")),S(t)&&-1===t.indexOf("BAD")&&(v.log("Overriding default aaxHost with: "+t),a=t),S(n))if(v.log("Setting bidId: "+n),d=n,S(e)){v.log("Setting pricepoint: "+e),s=e,v.log("Making JSONP call to load the creative.");var o=document.createElement("script");o.type="text/javascript",o.src=l+a+"/e/msdk/adm?b="+d+"&ps="+s,document.body.appendChild(o),v.log("Creating viewport meta tag and adding it to head.");var r=document.createElement("meta");r.name="viewport",r.content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.head.appendChild(r),function(){var e=["getVersion","isViewable","addEventListener","removeEventListener"];0<(e=void 0===window.mraid||"object"!==U(window.mraid)||null===window.mraid?["mraid"].concat(e):e.filter(function(e){return"function"!=typeof window.mraid[e]})).length&&C("apsLibraryError",{e:{et:"missingMraidMethods",msg:e}})}()}else v.log("Error","Pricepoint passed is not a valid string, aborting!");else v.log("Error","BidId passed is not a valid string, aborting!")},v.renderAd=function(g){if(v.ev=g.ev,g&&g.html){var m=document.getElementById(c);if(m){v.log("Loading HTML creative:",g.html),m.innerHTML="";var w=!1;!function(e){return 0!==e.innerWidth&&0!==e.innerHeight}(window)?(window.addEventListener("resize",f),window.setTimeout(function(){!1===w&&window.removeEventListener("resize",f),f(!1)},1e3)):f(!1)}else v.log('Ad div not found. Please place an empty div with id="__dtbAd__" in the page, aborting!')}else v.log("Looks like there is no creative in JSONP call, aborting!");function f(e){if(!1===w){function n(){mraid.isViewable()&&(mraid.removeEventListener("viewableChange",n),v.log("assigning intersitial dimensions on viewable"),l.style.width="100vw",l.style.height="100vh",window.addEventListener("resize",t),window.setTimeout(function(){s||(v.log("notch detection fallback running for resize not firing"),t())},100))}var t=function e(){s=!0,window.removeEventListener("resize",e),!function(){var e=!1,n=document.createElement("div");CSS.supports("padding-top: env(safe-area-inset-top)")?(n.style.paddingTop=h?"200pt":"env(safe-area-inset-top)",n.style.paddingBottom=h?"100pt":"env(safe-area-inset-bottom)",n.style.paddingLeft=h?"50pt":"env(safe-area-inset-left)",n.style.paddingRight=h?"40pt":"env(safe-area-inset-right)",e=!0):CSS.supports("padding-top: constant(safe-area-inset-top)")&&(n.style.paddingTop=h?"200pt":"constant(safe-area-inset-top)",n.style.paddingBottom=h?"100pt":"constant(safe-area-inset-bottom)",n.style.paddingLeft=h?"50pt":"constant(safe-area-inset-left)",n.style.paddingRight=h?"40pt":"constant(safe-area-inset-right)",e=!0);if(e){document.body.appendChild(n);var t={top:parseInt(window.getComputedStyle(n).paddingTop,10),bottom:parseInt(window.getComputedStyle(n).paddingBottom,10),left:parseInt(window.getComputedStyle(n).paddingLeft,10),right:parseInt(window.getComputedStyle(n).paddingRight,10)};for(var i in document.body.removeChild(n),t)if(0<t[i])return!0}return!1}()?y&&window.addEventListener("resize",function(){l.style.width=window.innerWidth+"px",l.style.height=window.innerHeight+"px"}):(v.log("notch detected for interstitial"),i())},i=function(){l.style.position="absolute",l.style.top="50%",l.style.left="50%",l.style.transform="translate(-50%, -50%)";var a=window.innerHeight>window.innerWidth?"portrait":"landscape";v.log("applying interstitial sizes for notch");var d=!1,s=!1;if(E&&P()){v.log("gmaSDK detected: ".concat(window.MRAID_ENV.sdkVersion));var e=window.MRAID_ENV.sdkVersion.split(".").map(function(e){return parseInt(e,10)}),n=e[0],t=e[1];e[2];(7===n&&46<=t||7<n)&&(d=!0,v.log("disabling iOS 13 logic for notch")),(7===n&&49<=t||7<n)&&(s=!0,v.log("using window.orientation value for device rotation"))}function i(t){var i=10,o=0,r=!1;!function e(n){v.log("value of window.orientation is ".concat(window.orientation)),!0===t&&!0!==n?v.log("initializing notch dimensions: ".concat(a)):(s?a!==(a=0===window.orientation||-180===window.orientation?"portrait":"landscape")&&(r=!0,v.log("window.orientation value has changed, ending polling")):a="portrait"===a?"landscape":"portrait",v.log("notch orientation change: ".concat(a)));"portrait"===a?(l.style.width="100vw",l.style.height=j()&&!d?"100vh":j()&&d?"87vh":"90vh"):(l.style.width=j()&&d?"87vw":"90vw",l.style.height="100vh"),++o!==i?!0!==t&&s&&!r&&o<i&&window.setTimeout(function(){v.log("loopCount for checking orientation is ".concat(o)),e(!0)},100):v.log("Ending polling, max loops reached")}(!1)}i(!0),window.addEventListener("orientationchange",i)};!(w=!0)!==e&&window.removeEventListener("resize",f);var l=document.createElement("iframe");l.style.border="none";var o=B();o?(l.style.width=o.width+"px",l.style.height=o.height+"px"):(l.style.width=window.innerWidth+"px",l.style.height=window.innerHeight+"px"),l.style.overflow="hidden",l.setAttribute("border","0"),l.setAttribute("id",b),l.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation",m.appendChild(l),l.contentWindow.mraid=window.mraid,l.contentWindow.amazon={},l.contentWindow.dtb=new H;var r=l.contentDocument||l.contentWindow.document,a=W(g.html),d="<style> body { margin: 0px; padding: 0px } </style>".concat(a);r.open("text/html"),r.write(d),r.close(),v.log("Adding event handlers..."),N(m)?(mraid.addEventListener("viewableChange",n),mraid.isViewable()&&n()):window.onresize=function(){l.style.width=window.innerWidth+"px",l.style.height=window.innerHeight+"px"};for(var s=!1,c=r.getElementsByTagName("a"),u=0;u<c.length;u++){var p=c[u];p.onclick||p.target||(p.target="_top")}v.ev=g.ev,V()}}};var N=function(e){return"100%"===e.style.width},B=function(){if(window.MRAID_ENV&&window.MRAID_ENV.amznAdInfo){var t=window.MRAID_ENV.amznAdInfo;return!!["width","height","type"].reduce(function(e,n){return t.hasOwnProperty(n)||(e=!1),e},!0)&&window.MRAID_ENV.amznAdInfo}return!1},W=function(e){var n=e.indexOf("mraid.js");return-1!==n&&(v.log("Purging extra mraid.js from the creative."),e=e.substring(0,n)+e.substring(n+8),v.log("New Creative: ",e)),e},H=function(){var o=mraid.open;this.sdkVersion="mDTB-js-1.0.1",this.os="Android",E&&(this.os="iOS"),"unknown"===v.sdkType&&(-1!==location.href.indexOf("mopub")?v.sdkType="mopub":-1!==location.href.indexOf("doubleclick")&&(v.sdkType="dfp")),mraid.open=function(e){if("string"==typeof e){if(v.log("Original URL:",e),/^amazonmobile:\/\//g.test(e)){var n=e.split("intent=");if(1<n.length){var t=n[n.length-1],i=decodeURIComponent(t);J(i)||C("apsLibraryError",{e:{et:"validateDLFallbackURL",msg:i}}),e="".concat("https://dl.amazon.com/redirect/ref=mm_1_aps-mobile-dl?campaignId=QALXjR&failureMode=MobileWebMostly&url=").concat(t),C("deepLink")}}v.log("Opening URL:",e),/^http/g.test(e)&&"mopub"===v.sdkType?(v.log("Opening url using mopub native interface."),o.apply(mraid,["mopubnativebrowser://navigate?url="+encodeURIComponent(e)])):(v.log("Opening url using mraid interface."),o.apply(mraid,arguments))}},this.openUrl=mraid.open}}(window.amzn.dtb),window.aax_render_ad=window.amzn.dtb.renderAd},function(e,n){e.exports=function(e){if("string"!=typeof e)return!1;var n=e.match(i);if(!n)return!1;var t=n[1];if(!t)return!1;if(o.test(t)||r.test(t))return!0;return!1};var i=/^(?:\w+:)?\/\/(\S+)$/,o=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,r=/^[^\s\.]+\.\S{2,}$/}]);