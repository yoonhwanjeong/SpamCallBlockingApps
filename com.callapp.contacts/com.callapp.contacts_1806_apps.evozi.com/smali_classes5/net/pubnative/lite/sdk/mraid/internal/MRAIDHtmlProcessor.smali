.class public Lnet/pubnative/lite/sdk/mraid/internal/MRAIDHtmlProcessor;
.super Ljava/lang/Object;
.source "SourceFile"


# direct methods
.method public constructor <init>()V
    .locals 0

    .line 36
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    return-void
.end method

.method public static processRawHtml(Ljava/lang/String;)Ljava/lang/String;
    .locals 9

    .line 38
    new-instance v0, Ljava/lang/StringBuffer;

    invoke-direct {v0, p0}, Ljava/lang/StringBuffer;-><init>(Ljava/lang/String;)V

    const-string v1, "<script\\s+[^>]*\\bsrc\\s*=\\s*([\"\'])mraid\\.js\\1[^>]*>\\s*</script>\\n*"

    const/4 v2, 0x2

    .line 49
    invoke-static {v1, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    move-result-object v1

    .line 50
    invoke-virtual {v1, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    const-string v1, "<html"

    .line 53
    invoke-virtual {p0, v1}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    move-result v1

    const-string v3, "<head"

    .line 54
    invoke-virtual {p0, v3}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    move-result v3

    const-string v4, "<body"

    .line 55
    invoke-virtual {p0, v4}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    move-result p0

    const-string v4, "line.separator"

    .line 57
    invoke-static {v4}, Ljava/lang/System;->getProperty(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    const-string v5, "</head>"

    const-string v6, "<head>"

    const/4 v7, 0x0

    if-nez v1, :cond_2

    if-nez p0, :cond_0

    .line 61
    invoke-static {v4}, Ljava/lang/String;->valueOf(Ljava/lang/Object;)Ljava/lang/String;

    move-result-object p0

    const-string v1, "<body><div id=\'hybid-ad\' align=\'center\'>"

    invoke-virtual {v1, p0}, Ljava/lang/String;->concat(Ljava/lang/String;)Ljava/lang/String;

    move-result-object p0

    invoke-virtual {v0, v7, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    const-string p0, "</div></body>"

    .line 62
    invoke-virtual {v0, p0}, Ljava/lang/StringBuffer;->append(Ljava/lang/String;)Ljava/lang/StringBuffer;

    :cond_0
    if-nez v3, :cond_1

    .line 65
    new-instance p0, Ljava/lang/StringBuilder;

    invoke-direct {p0, v6}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p0

    invoke-virtual {v0, v7, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 70
    :cond_1
    invoke-static {v4}, Ljava/lang/String;->valueOf(Ljava/lang/Object;)Ljava/lang/String;

    move-result-object p0

    const-string v1, "<html>"

    invoke-virtual {v1, p0}, Ljava/lang/String;->concat(Ljava/lang/String;)Ljava/lang/String;

    move-result-object p0

    invoke-virtual {v0, v7, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 71
    new-instance p0, Ljava/lang/StringBuilder;

    invoke-direct {p0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v1, "</html>"

    invoke-virtual {p0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p0

    invoke-virtual {v0, p0}, Ljava/lang/StringBuffer;->append(Ljava/lang/String;)Ljava/lang/StringBuffer;

    goto :goto_1

    :cond_2
    if-nez v3, :cond_3

    const-string p0, "<html[^>]*>"

    .line 75
    invoke-static {p0, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    move-result-object p0

    .line 76
    invoke-virtual {p0, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    move-result-object p0

    const/4 v1, 0x0

    .line 78
    :goto_0
    invoke-virtual {p0, v1}, Ljava/util/regex/Matcher;->find(I)Z

    move-result v1

    if-eqz v1, :cond_3

    .line 79
    invoke-virtual {p0}, Ljava/util/regex/Matcher;->end()I

    move-result v1

    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v0, v1, v3}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 80
    invoke-virtual {p0}, Ljava/util/regex/Matcher;->end()I

    move-result v1

    goto :goto_0

    :cond_3
    :goto_1
    const-string p0, "Ly8KICAgICAgICAvLyAgbXJhaWQuanMKICAgICAgICAvLwoKICAgICAgICAoZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgY29uc29sZS5sb2coIk1SQUlEIG9iamVjdCBsb2FkaW5nLi4uIik7CgogICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAgICAgICAgICAqIGNvbnNvbGUgbG9nZ2luZyBoZWxwZXIKICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgICAgICAgICAgdmFyIExvZ0xldmVsRW51bSA9IHsKICAgICAgICAgICAgICAgICJERUJVRyI6IDAsCiAgICAgICAgICAgICAgICAiSU5GTyI6IDEsCiAgICAgICAgICAgICAgICAiV0FSTklORyI6IDIsCiAgICAgICAgICAgICAgICAiRVJST1IiOiAzLAogICAgICAgICAgICAgICAgIk5PTkUiOiA0CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgbG9nTGV2ZWwgPSBMb2dMZXZlbEVudW0uREVCVUc7CiAgICAgICAgICAgIHZhciBsb2cgPSB7fTsKCiAgICAgICAgICAgIGxvZy5kID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgICAgaWYgKGxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5ERUJVRykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoRC1tcmFpZC5qcykgIiArIG1zZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBsb2cuaSA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgIGlmIChsb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uSU5GTykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoSS1tcmFpZC5qcykgIiArIG1zZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBsb2cudyA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgIGlmIChsb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uV0FSTklORykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoVy1tcmFpZC5qcykgIiArIG1zZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBsb2cuZSA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgIGlmIChsb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uRVJST1IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiKEUtbXJhaWQuanMpICIgKyBtc2cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAgICAgICAgKiBNUkFJRCBkZWNsYXJhdGlvbgogICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgICAgICAgICB2YXIgbXJhaWQgPSB3aW5kb3cubXJhaWQgPSB7fTsKCiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAgICogY29uc3RhbnRzCiAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICAgICAgICAgIHZhciBWRVJTSU9OID0gIjIuMCI7CgogICAgICAgICAgICB2YXIgU1RBVEVTID0gbXJhaWQuU1RBVEVTID0gewogICAgICAgICAgICAgICAgIkxPQURJTkciOiAibG9hZGluZyIsCiAgICAgICAgICAgICAgICAiREVGQVVMVCI6ICJkZWZhdWx0IiwKICAgICAgICAgICAgICAgICJFWFBBTkRFRCI6ICJleHBhbmRlZCIsCiAgICAgICAgICAgICAgICAiUkVTSVpFRCI6ICJyZXNpemVkIiwKICAgICAgICAgICAgICAgICJISURERU4iOiAiaGlkZGVuIgogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIFBMQUNFTUVOVF9UWVBFUyA9IG1yYWlkLlBMQUNFTUVOVF9UWVBFUyA9IHsKICAgICAgICAgICAgICAgICJJTkxJTkUiOiAiaW5saW5lIiwKICAgICAgICAgICAgICAgICJJTlRFUlNUSVRJQUwiOiAiaW50ZXJzdGl0aWFsIgogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIFJFU0laRV9QUk9QRVJUSUVTX0NVU1RPTV9DTE9TRV9QT1NJVElPTiA9IG1yYWlkLlJFU0laRV9QUk9QRVJUSUVTX0NVU1RPTV9DTE9TRV9QT1NJVElPTiA9IHsKICAgICAgICAgICAgICAgICJUT1BfTEVGVCI6ICJ0b3AtbGVmdCIsCiAgICAgICAgICAgICAgICAiVE9QX0NFTlRFUiI6ICJ0b3AtY2VudGVyIiwKICAgICAgICAgICAgICAgICJUT1BfUklHSFQiOiAidG9wLXJpZ2h0IiwKICAgICAgICAgICAgICAgICJDRU5URVIiOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICJCT1RUT01fTEVGVCI6ICJib3R0b20tbGVmdCIsCiAgICAgICAgICAgICAgICAiQk9UVE9NX0NFTlRFUiI6ICJib3R0b20tY2VudGVyIiwKICAgICAgICAgICAgICAgICJCT1RUT01fUklHSFQiOiAiYm90dG9tLXJpZ2h0IgogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIE9SSUVOVEFUSU9OX1BST1BFUlRJRVNfRk9SQ0VfT1JJRU5UQVRJT04gPSBtcmFpZC5PUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OID0gewogICAgICAgICAgICAgICAgIlBPUlRSQUlUIjogInBvcnRyYWl0IiwKICAgICAgICAgICAgICAgICJMQU5EU0NBUEUiOiAibGFuZHNjYXBlIiwKICAgICAgICAgICAgICAgICJOT05FIjogIm5vbmUiCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgRVZFTlRTID0gbXJhaWQuRVZFTlRTID0gewogICAgICAgICAgICAgICAgIkVSUk9SIjogImVycm9yIiwKICAgICAgICAgICAgICAgICJSRUFEWSI6ICJyZWFkeSIsCiAgICAgICAgICAgICAgICAiU0laRUNIQU5HRSI6ICJzaXplQ2hhbmdlIiwKICAgICAgICAgICAgICAgICJTVEFURUNIQU5HRSI6ICJzdGF0ZUNoYW5nZSIsCiAgICAgICAgICAgICAgICAiVklFV0FCTEVDSEFOR0UiOiAidmlld2FibGVDaGFuZ2UiCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgU1VQUE9SVEVEX0ZFQVRVUkVTID0gbXJhaWQuU1VQUE9SVEVEX0ZFQVRVUkVTID0gewogICAgICAgICAgICAgICAgIlNNUyI6ICJzbXMiLAogICAgICAgICAgICAgICAgIlRFTCI6ICJ0ZWwiLAogICAgICAgICAgICAgICAgIkNBTEVOREFSIjogImNhbGVuZGFyIiwKICAgICAgICAgICAgICAgICJTVE9SRVBJQ1RVUkUiOiAic3RvcmVQaWN0dXJlIiwKICAgICAgICAgICAgICAgICJJTkxJTkVWSURFTyI6ICJpbmxpbmVWaWRlbyIKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAgICogc3RhdGUKICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgICAgICAgICAgdmFyIHN0YXRlID0gU1RBVEVTLkxPQURJTkc7CiAgICAgICAgICAgIHZhciBwbGFjZW1lbnRUeXBlID0gUExBQ0VNRU5UX1RZUEVTLklOTElORTsKICAgICAgICAgICAgdmFyIHN1cHBvcnRlZEZlYXR1cmVzID0ge307CiAgICAgICAgICAgIHZhciBpc1ZpZXdhYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBpc0V4cGFuZFByb3BlcnRpZXNTZXQgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIGlzUmVzaXplUmVhZHkgPSBmYWxzZTsKCiAgICAgICAgICAgIHZhciBleHBhbmRQcm9wZXJ0aWVzID0gewogICAgICAgICAgICAgICAgIndpZHRoIjogMCwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAwLAogICAgICAgICAgICAgICAgInVzZUN1c3RvbUNsb3NlIjogZmFsc2UsCiAgICAgICAgICAgICAgICAiaXNNb2RhbCI6IHRydWUKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBvcmllbnRhdGlvblByb3BlcnRpZXMgPSB7CiAgICAgICAgICAgICAgICAiYWxsb3dPcmllbnRhdGlvbkNoYW5nZSI6IHRydWUsCiAgICAgICAgICAgICAgICAiZm9yY2VPcmllbnRhdGlvbiI6IE9SSUVOVEFUSU9OX1BST1BFUlRJRVNfRk9SQ0VfT1JJRU5UQVRJT04uTk9ORQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHJlc2l6ZVByb3BlcnRpZXMgPSB7CiAgICAgICAgICAgICAgICAid2lkdGgiOiAwLAogICAgICAgICAgICAgICAgImhlaWdodCI6IDAsCiAgICAgICAgICAgICAgICAiY3VzdG9tQ2xvc2VQb3NpdGlvbiI6IFJFU0laRV9QUk9QRVJUSUVTX0NVU1RPTV9DTE9TRV9QT1NJVElPTi5UT1BfUklHSFQsCiAgICAgICAgICAgICAgICAib2Zmc2V0WCI6IDAsCiAgICAgICAgICAgICAgICAib2Zmc2V0WSI6IDAsCiAgICAgICAgICAgICAgICAiYWxsb3dPZmZzY3JlZW4iOiB0cnVlCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgY3VycmVudFBvc2l0aW9uID0gewogICAgICAgICAgICAgICAgIngiOiAwLAogICAgICAgICAgICAgICAgInkiOiAwLAogICAgICAgICAgICAgICAgIndpZHRoIjogMCwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAwCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgZGVmYXVsdFBvc2l0aW9uID0gewogICAgICAgICAgICAgICAgIngiOiAwLAogICAgICAgICAgICAgICAgInkiOiAwLAogICAgICAgICAgICAgICAgIndpZHRoIjogMCwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAwCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgbWF4U2l6ZSA9IHsKICAgICAgICAgICAgICAgICJ3aWR0aCI6IDAsCiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogMAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHNjcmVlblNpemUgPSB7CiAgICAgICAgICAgICAgICAid2lkdGgiOiAwLAogICAgICAgICAgICAgICAgImhlaWdodCI6IDAKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBjdXJyZW50T3JpZW50YXRpb24gPSAwOwoKICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IHt9OwogICAgICAgICAgICB3aW5kb3cubGlzdGVuZXJzID0gbGlzdGVuZXJzOwoKICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAgICAgICAgKiAib2ZmaWNpYWwiIEFQSTogbWV0aG9kcyBjYWxsZWQgYnkgY3JlYXRpdmUKICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgICAgICAgICAgbXJhaWQuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgbGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5hZGRFdmVudExpc3RlbmVyICIgKyBldmVudCArICI6ICIgKyBTdHJpbmcobGlzdGVuZXIpKTsKICAgICAgICAgICAgICAgIGlmICghZXZlbnQgfHwgIWxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoIkJvdGggZXZlbnQgYW5kIGxpc3RlbmVyIGFyZSByZXF1aXJlZC4iLCAiYWRkRXZlbnRMaXN0ZW5lciIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghY29udGFpbnMoZXZlbnQsIEVWRU5UUykpIHsKICAgICAgICAgICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiVW5rbm93biBNUkFJRCBldmVudDogIiArIGV2ZW50LCAiYWRkRXZlbnRMaXN0ZW5lciIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcnNGb3JFdmVudCA9IGxpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnNbZXZlbnRdIHx8IFtdOwogICAgICAgICAgICAgICAgLy8gY2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxpc3RlbmVyIGlzbid0IGFscmVhZHkgcmVnaXN0ZXJlZAogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnNGb3JFdmVudC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBzdHIxID0gU3RyaW5nKGxpc3RlbmVyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RyMiA9IFN0cmluZyhsaXN0ZW5lcnNGb3JFdmVudFtpXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyID09PSBsaXN0ZW5lcnNGb3JFdmVudFtpXSB8fCBzdHIxID09PSBzdHIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pKCJsaXN0ZW5lciAiICsgc3RyMSArICIgaXMgYWxyZWFkeSByZWdpc3RlcmVkIGZvciBldmVudCAiICsgZXZlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGlzdGVuZXJzRm9yRXZlbnQucHVzaChsaXN0ZW5lcik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5jcmVhdGVDYWxlbmRhckV2ZW50ID0gZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5jcmVhdGVDYWxlbmRhckV2ZW50IHdpdGggIiArIHBhcmFtZXRlcnMpOwogICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRlZEZlYXR1cmVzW21yYWlkLlNVUFBPUlRFRF9GRUFUVVJFUy5DQUxFTkRBUl0pIHsKICAgICAgICAgICAgICAgICAgICBjYWxsTmF0aXZlKCJjcmVhdGVDYWxlbmRhckV2ZW50P2V2ZW50SlNPTj0iICsgSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVycykpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cuZSgiY3JlYXRlQ2FsZW5kYXJFdmVudCBpcyBub3Qgc3VwcG9ydGVkIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5jbG9zZSIpOwogICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBTVEFURVMuTE9BRElORwogICAgICAgICAgICAgICAgICAgIHx8IChzdGF0ZSA9PT0gU1RBVEVTLkRFRkFVTFQgJiYgcGxhY2VtZW50VHlwZSA9PT0gUExBQ0VNRU5UX1RZUEVTLklOTElORSkKICAgICAgICAgICAgICAgICAgICB8fCBzdGF0ZSA9PT0gU1RBVEVTLkhJRERFTikgewogICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYWxsTmF0aXZlKCJjbG9zZSIpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuZXhwYW5kID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmV4cGFuZCAoMS1wYXJ0KSIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuZXhwYW5kICIgKyB1cmwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gVGhlIG9ubHkgdGltZSBpdCBpcyB2YWxpZCB0byBjYWxsIGV4cGFuZCBpcyB3aGVuIHRoZSBhZCBpcwogICAgICAgICAgICAgICAgLy8gYSBiYW5uZXIgY3VycmVudGx5IGluIGVpdGhlciBkZWZhdWx0IG9yIHJlc2l6ZWQgc3RhdGUuCiAgICAgICAgICAgICAgICBpZiAocGxhY2VtZW50VHlwZSAhPT0gUExBQ0VNRU5UX1RZUEVTLklOTElORQogICAgICAgICAgICAgICAgICAgIHx8IChzdGF0ZSAhPT0gU1RBVEVTLkRFRkFVTFQgJiYgc3RhdGUgIT09IFNUQVRFUy5SRVNJWkVEKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxOYXRpdmUoImV4cGFuZCIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYWxsTmF0aXZlKCJleHBhbmQ/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5nZXRDdXJyZW50UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuZ2V0Q3VycmVudFBvc2l0aW9uIik7CiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFBvc2l0aW9uOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuZ2V0RGVmYXVsdFBvc2l0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmdldERlZmF1bHRQb3NpdGlvbiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRQb3NpdGlvbjsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLmdldEV4cGFuZFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuZ2V0RXhwYW5kUHJvcGVydGllcyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGV4cGFuZFByb3BlcnRpZXM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5nZXRNYXhTaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmdldE1heFNpemUiKTsKICAgICAgICAgICAgICAgIHJldHVybiBtYXhTaXplOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuZ2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmdldE9yaWVudGF0aW9uUHJvcGVydGllcyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIG9yaWVudGF0aW9uUHJvcGVydGllczsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLmdldFBsYWNlbWVudFR5cGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuZ2V0UGxhY2VtZW50VHlwZSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlbWVudFR5cGU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5nZXRSZXNpemVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmdldFJlc2l6ZVByb3BlcnRpZXMiKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNpemVQcm9wZXJ0aWVzOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuZ2V0U2NyZWVuU2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5nZXRTY3JlZW5TaXplIik7CiAgICAgICAgICAgICAgICByZXR1cm4gc2NyZWVuU2l6ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLmdldFN0YXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmdldFN0YXRlIik7CiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5nZXRWZXJzaW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmdldFZlcnNpb24iKTsKICAgICAgICAgICAgICAgIHJldHVybiBWRVJTSU9OOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuaXNWaWV3YWJsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5pc1ZpZXdhYmxlIik7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNWaWV3YWJsZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLm9wZW4gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQub3BlbiAiICsgdXJsKTsKICAgICAgICAgICAgICAgIGNhbGxOYXRpdmUoIm9wZW4/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5wbGF5VmlkZW8gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQucGxheVZpZGVvICIgKyB1cmwpOwogICAgICAgICAgICAgICAgY2FsbE5hdGl2ZSgicGxheVZpZGVvP3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHVybCkpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgbGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5yZW1vdmVFdmVudExpc3RlbmVyICIgKyBldmVudCArICIgOiAiICsgU3RyaW5nKGxpc3RlbmVyKSk7CiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoIkV2ZW50IGlzIHJlcXVpcmVkLiIsICJyZW1vdmVFdmVudExpc3RlbmVyIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFjb250YWlucyhldmVudCwgRVZFTlRTKSkgewogICAgICAgICAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KCJVbmtub3duIE1SQUlEIGV2ZW50OiAiICsgZXZlbnQsICJyZW1vdmVFdmVudExpc3RlbmVyIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyc0ZvckV2ZW50ID0gbGlzdGVuZXJzW2V2ZW50XTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IHRvIGZpbmQgdGhlIGdpdmVuIGxpc3RlbmVyCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBsaXN0ZW5lcnNGb3JFdmVudC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWdpc3RlcmVkTGlzdGVuZXIgPSBsaXN0ZW5lcnNGb3JFdmVudFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIxID0gU3RyaW5nKGxpc3RlbmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIyID0gU3RyaW5nKHJlZ2lzdGVyZWRMaXN0ZW5lcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IHJlZ2lzdGVyZWRMaXN0ZW5lciB8fCBzdHIxID09PSBzdHIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzRm9yRXZlbnQuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBsZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pKCJsaXN0ZW5lciAiICsgc3RyMSArICIgbm90IGZvdW5kIGZvciBldmVudCAiICsgZXZlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lcnNGb3JFdmVudC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbZXZlbnRdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbGlzdGVuZXIgdG8gcmVtb3ZlIHdhcyBwcm92aWRlZCwgc28gcmVtb3ZlIGFsbCBsaXN0ZW5lcnMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGdpdmVuIGV2ZW50CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbZXZlbnRdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLmkoIm5vIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBldmVudCAiICsgZXZlbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLnJlc2l6ZSIpOwogICAgICAgICAgICAgICAgLy8gVGhlIG9ubHkgdGltZSBpdCBpcyB2YWxpZCB0byBjYWxsIHJlc2l6ZSBpcyB3aGVuIHRoZSBhZCBpcwogICAgICAgICAgICAgICAgLy8gYSBiYW5uZXIgY3VycmVudGx5IGluIGVpdGhlciBkZWZhdWx0IG9yIHJlc2l6ZWQgc3RhdGUuCiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIGFuIGVycm9yIGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIGV4cGFuZGVkLgogICAgICAgICAgICAgICAgaWYgKHBsYWNlbWVudFR5cGUgPT09IFBMQUNFTUVOVF9UWVBFUy5JTlRFUlNUSVRJQUwgfHwgc3RhdGUgPT09IFNUQVRFUy5MT0FESU5HIHx8IHN0YXRlID09PSBTVEFURVMuSElEREVOKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gU1RBVEVTLkVYUEFOREVEKSB7CiAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoIm1yYWlkLnJlc2l6ZSBjYWxsZWQgd2hlbiBhZCBpcyBpbiBleHBhbmRlZCBzdGF0ZSIsICJtcmFpZC5yZXNpemUiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWlzUmVzaXplUmVhZHkpIHsKICAgICAgICAgICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgibXJhaWQucmVzaXplIGlzIG5vdCByZWFkeSB0byBiZSBjYWxsZWQiLCAibXJhaWQucmVzaXplIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FsbE5hdGl2ZSgicmVzaXplIik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5zZXRFeHBhbmRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5zZXRFeHBhbmRQcm9wZXJ0aWVzIik7CgogICAgICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZShwcm9wZXJ0aWVzLCAic2V0RXhwYW5kUHJvcGVydGllcyIpKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLmUoImZhaWxlZCB2YWxpZGF0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBvbGRVc2VDdXN0b21DbG9zZSA9IGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2U7CgogICAgICAgICAgICAgICAgLy8gZXhwYW5kUHJvcGVydGllcyBjb250YWlucyAzIHJlYWQtd3JpdGUgcHJvcGVydGllczogd2lkdGgsIGhlaWdodCwgYW5kIHVzZUN1c3RvbUNsb3NlOwogICAgICAgICAgICAgICAgLy8gdGhlIGlzTW9kYWwgcHJvcGVydHkgaXMgcmVhZC1vbmx5CiAgICAgICAgICAgICAgICB2YXIgcndQcm9wcyA9IFsid2lkdGgiLCAiaGVpZ2h0IiwgInVzZUN1c3RvbUNsb3NlIl07CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ3UHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcG5hbWUgPSByd1Byb3BzW2ldOwogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BuYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRQcm9wZXJ0aWVzW3Byb3BuYW1lXSA9IHByb3BlcnRpZXNbcHJvcG5hbWVdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBJbiBNUkFJRCB2Mi4wLCBhbGwgZXhwYW5kZWQgYWRzIGJ5IGRlZmluaXRpb24gY292ZXIgdGhlIGVudGlyZSBzY3JlZW4sCiAgICAgICAgICAgICAgICAvLyBzbyB0aGUgb25seSBwcm9wZXJ0eSB0aGF0IHRoZSBuYXRpdmUgc2lkZSBoYXMgdG8ga25vdyBhYm91dCBpcyB1c2VDdXN0b21DbG9zZS4KICAgICAgICAgICAgICAgIC8vIChUaGF0IGlzLCB0aGUgd2lkdGggYW5kIGhlaWdodCBwcm9wZXJ0aWVzIGFyZSBub3QgbmVlZGVkIGJ5IHRoZSBuYXRpdmUgY29kZS4pCiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kUHJvcGVydGllcy51c2VDdXN0b21DbG9zZSAhPT0gb2xkVXNlQ3VzdG9tQ2xvc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsTmF0aXZlKCJ1c2VDdXN0b21DbG9zZT91c2VDdXN0b21DbG9zZT0iICsgZXhwYW5kUHJvcGVydGllcy51c2VDdXN0b21DbG9zZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaXNFeHBhbmRQcm9wZXJ0aWVzU2V0ID0gdHJ1ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLnNldE9yaWVudGF0aW9uUHJvcGVydGllcyA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuc2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzIik7CgogICAgICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZShwcm9wZXJ0aWVzLCAic2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzIikpIHsKICAgICAgICAgICAgICAgICAgICBsb2cuZSgiZmFpbGVkIHZhbGlkYXRpb24iKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG5ld09yaWVudGF0aW9uUHJvcGVydGllcyA9IHt9OwogICAgICAgICAgICAgICAgbmV3T3JpZW50YXRpb25Qcm9wZXJ0aWVzLmFsbG93T3JpZW50YXRpb25DaGFuZ2UgPSBvcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZSwKICAgICAgICAgICAgICAgICAgICBuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuZm9yY2VPcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uOwoKICAgICAgICAgICAgICAgIC8vIG9yaWVudGF0aW9uUHJvcGVydGllcyBjb250YWlucyAyIHJlYWQtd3JpdGUgcHJvcGVydGllczoKICAgICAgICAgICAgICAgIC8vIGFsbG93T3JpZW50YXRpb25DaGFuZ2UgYW5kIGZvcmNlT3JpZW50YXRpb24KICAgICAgICAgICAgICAgIHZhciByd1Byb3BzID0gWyJhbGxvd09yaWVudGF0aW9uQ2hhbmdlIiwgImZvcmNlT3JpZW50YXRpb24iXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcndQcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBwcm9wbmFtZSA9IHJ3UHJvcHNbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld09yaWVudGF0aW9uUHJvcGVydGllc1twcm9wbmFtZV0gPSBwcm9wZXJ0aWVzW3Byb3BuYW1lXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU2V0dGluZyBhbGxvd09yaWVudGF0aW9uQ2hhbmdlIHRvIHRydWUgd2hpbGUgc2V0dGluZyBmb3JjZU9yaWVudGF0aW9uCiAgICAgICAgICAgICAgICAvLyB0byBlaXRoZXIgcG9ydHJhaXQgb3IgbGFuZHNjYXBlCiAgICAgICAgICAgICAgICAvLyBpcyBjb25zaWRlcmVkIGFuIGVycm9yIGNvbmRpdGlvbi4KICAgICAgICAgICAgICAgIGlmIChuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZQogICAgICAgICAgICAgICAgICAgICYmIG5ld09yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uICE9PSBtcmFpZC5PUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OLk5PTkUpIHsKICAgICAgICAgICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgKICAgICAgICAgICAgICAgICAgICAgICAgImFsbG93T3JpZW50YXRpb25DaGFuZ2UgaXMgdHJ1ZSBidXQgZm9yY2VPcmllbnRhdGlvbiBpcyAiCiAgICAgICAgICAgICAgICAgICAgICAgICsgbmV3T3JpZW50YXRpb25Qcm9wZXJ0aWVzLmZvcmNlT3JpZW50YXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICJzZXRPcmllbnRhdGlvblByb3BlcnRpZXMiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmFsbG93T3JpZW50YXRpb25DaGFuZ2UgPSBuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZTsKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uID0gbmV3T3JpZW50YXRpb25Qcm9wZXJ0aWVzLmZvcmNlT3JpZW50YXRpb247CgogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICJhbGxvd09yaWVudGF0aW9uQ2hhbmdlPSIKICAgICAgICAgICAgICAgICAgICArIG9yaWVudGF0aW9uUHJvcGVydGllcy5hbGxvd09yaWVudGF0aW9uQ2hhbmdlCiAgICAgICAgICAgICAgICAgICAgKyAiJmZvcmNlT3JpZW50YXRpb249IiArIG9yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uOwoKICAgICAgICAgICAgICAgIGNhbGxOYXRpdmUoInNldE9yaWVudGF0aW9uUHJvcGVydGllcz8iICsgcGFyYW1zKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAocHJvcGVydGllcykgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMiKTsKCiAgICAgICAgICAgICAgICBpc1Jlc2l6ZVJlYWR5ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgLy8gcmVzaXplUHJvcGVydGllcyBjb250YWlucyA2IHJlYWQtd3JpdGUgcHJvcGVydGllczoKICAgICAgICAgICAgICAgIC8vIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgsIG9mZnNldFksIGN1c3RvbUNsb3NlUG9zaXRpb24sIGFsbG93T2Zmc2NyZWVuCgogICAgICAgICAgICAgICAgLy8gVGhlIHByb3BlcnRpZXMgb2JqZWN0IHBhc3NlZCBpbnRvIHRoaXMgZnVuY3Rpb24gbXVzdCBjb250YWluIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgsIG9mZnNldFkuCiAgICAgICAgICAgICAgICAvLyBUaGUgcmVtYWluaW5nIHR3byBwcm9wZXJ0aWVzIGFyZSBvcHRpb25hbC4KICAgICAgICAgICAgICAgIHZhciByZXF1aXJlZFByb3BzID0gWyJ3aWR0aCIsICJoZWlnaHQiLCAib2Zmc2V0WCIsICJvZmZzZXRZIl07CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcXVpcmVkUHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcG5hbWUgPSByZXF1aXJlZFByb3BzW2ldOwogICAgICAgICAgICAgICAgICAgIGlmICghcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wbmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicmVxdWlyZWQgcHJvcGVydHkgIiArIHByb3BuYW1lICsgIiBpcyBtaXNzaW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtcmFpZC5zZXRSZXNpemVQcm9wZXJ0aWVzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZShwcm9wZXJ0aWVzLCAic2V0UmVzaXplUHJvcGVydGllcyIpKSB7CiAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoImZhaWxlZCB2YWxpZGF0aW9uIiwgIm1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGFkanVzdG1lbnRzID0geyJ4IjogMCwgInkiOiAwfTsKCiAgICAgICAgICAgICAgICB2YXIgYWxsb3dPZmZzY3JlZW4gPSBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KCJhbGxvd09mZnNjcmVlbiIpID8gcHJvcGVydGllcy5hbGxvd09mZnNjcmVlbiA6IHJlc2l6ZVByb3BlcnRpZXMuYWxsb3dPZmZzY3JlZW47CiAgICAgICAgICAgICAgICBpZiAoIWFsbG93T2Zmc2NyZWVuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMud2lkdGggPiBtYXhTaXplLndpZHRoIHx8IHByb3BlcnRpZXMuaGVpZ2h0ID4gbWF4U2l6ZS5oZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZUVycm9yRXZlbnQoInJlc2l6ZSB3aWR0aCBvciBoZWlnaHQgaXMgZ3JlYXRlciB0aGFuIHRoZSBtYXhTaXplIHdpZHRoIG9yIGhlaWdodCIsICJtcmFpZC5zZXRSZXNpemVQcm9wZXJ0aWVzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYWRqdXN0bWVudHMgPSBmaXRSZXNpemVWaWV3T25TY3JlZW4ocHJvcGVydGllcyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0Nsb3NlUmVnaW9uT25TY3JlZW4ocHJvcGVydGllcykpIHsKICAgICAgICAgICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiY2xvc2UgZXZlbnQgcmVnaW9uIHdpbGwgbm90IGFwcGVhciBlbnRpcmVseSBvbnNjcmVlbiIsICJtcmFpZC5zZXRSZXNpemVQcm9wZXJ0aWVzIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciByd1Byb3BzID0gWyJ3aWR0aCIsICJoZWlnaHQiLCAib2Zmc2V0WCIsICJvZmZzZXRZIiwgImN1c3RvbUNsb3NlUG9zaXRpb24iLCAiYWxsb3dPZmZzY3JlZW4iXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcndQcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBwcm9wbmFtZSA9IHJ3UHJvcHNbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZVByb3BlcnRpZXNbcHJvcG5hbWVdID0gcHJvcGVydGllc1twcm9wbmFtZV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPQogICAgICAgICAgICAgICAgICAgICJ3aWR0aD0iICsgcmVzaXplUHJvcGVydGllcy53aWR0aCArCiAgICAgICAgICAgICAgICAgICAgIiZoZWlnaHQ9IiArIHJlc2l6ZVByb3BlcnRpZXMuaGVpZ2h0ICsKICAgICAgICAgICAgICAgICAgICAiJm9mZnNldFg9IiArIChyZXNpemVQcm9wZXJ0aWVzLm9mZnNldFggKyBhZGp1c3RtZW50cy54KSArCiAgICAgICAgICAgICAgICAgICAgIiZvZmZzZXRZPSIgKyAocmVzaXplUHJvcGVydGllcy5vZmZzZXRZICsgYWRqdXN0bWVudHMueSkgKwogICAgICAgICAgICAgICAgICAgICImY3VzdG9tQ2xvc2VQb3NpdGlvbj0iICsgcmVzaXplUHJvcGVydGllcy5jdXN0b21DbG9zZVBvc2l0aW9uICsKICAgICAgICAgICAgICAgICAgICAiJmFsbG93T2Zmc2NyZWVuPSIgKyByZXNpemVQcm9wZXJ0aWVzLmFsbG93T2Zmc2NyZWVuOwoKICAgICAgICAgICAgICAgIGNhbGxOYXRpdmUoInNldFJlc2l6ZVByb3BlcnRpZXM/IiArIHBhcmFtcyk7CgogICAgICAgICAgICAgICAgaXNSZXNpemVSZWFkeSA9IHRydWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5zdG9yZVBpY3R1cmUgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuc3RvcmVQaWN0dXJlICIgKyB1cmwpOwogICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRlZEZlYXR1cmVzW21yYWlkLlNVUFBPUlRFRF9GRUFUVVJFUy5TVE9SRVBJQ1RVUkVdKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbE5hdGl2ZSgic3RvcmVQaWN0dXJlP3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHVybCkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cuZSgic3RvcmVQaWN0dXJlIGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLnN1cHBvcnRzID0gZnVuY3Rpb24gKGZlYXR1cmUpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5zdXBwb3J0cyAiICsgZmVhdHVyZSArICIgIiArIHN1cHBvcnRlZEZlYXR1cmVzW2ZlYXR1cmVdKTsKICAgICAgICAgICAgICAgIHZhciByZXR2YWwgPSBzdXBwb3J0ZWRGZWF0dXJlc1tmZWF0dXJlXTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmV0dmFsID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICAgIHJldHZhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJldHZhbDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLnVzZUN1c3RvbUNsb3NlID0gZnVuY3Rpb24gKGlzQ3VzdG9tQ2xvc2UpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC51c2VDdXN0b21DbG9zZSAiICsgaXNDdXN0b21DbG9zZSk7CiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kUHJvcGVydGllcy51c2VDdXN0b21DbG9zZSAhPT0gaXNDdXN0b21DbG9zZSkgewogICAgICAgICAgICAgICAgICAgIGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2UgPSBpc0N1c3RvbUNsb3NlOwogICAgICAgICAgICAgICAgICAgIGNhbGxOYXRpdmUoInVzZUN1c3RvbUNsb3NlP3VzZUN1c3RvbUNsb3NlPSIKICAgICAgICAgICAgICAgICAgICAgICAgKyBleHBhbmRQcm9wZXJ0aWVzLnVzZUN1c3RvbUNsb3NlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAgICogaGVscGVyIG1ldGhvZHMgY2FsbGVkIGJ5IFNESwogICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgICAgICAgICAvLyBzZXR0ZXJzIHRvIGNoYW5nZSBzdGF0ZQogICAgICAgICAgICBtcmFpZC5zZXRDdXJyZW50UG9zaXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLnNldEN1cnJlbnRQb3NpdGlvbiAiICsgeCArICIsIiArIHkgKyAiLCIgKyB3aWR0aCArICIsIiArIGhlaWdodCk7CgogICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzU2l6ZSA9IHt9OwogICAgICAgICAgICAgICAgcHJldmlvdXNTaXplLndpZHRoID0gY3VycmVudFBvc2l0aW9uLndpZHRoOwogICAgICAgICAgICAgICAgcHJldmlvdXNTaXplLmhlaWdodCA9IGN1cnJlbnRQb3NpdGlvbi5oZWlnaHQ7CiAgICAgICAgICAgICAgICBsb2cuaSgicHJldmlvdXNTaXplICIgKyBwcmV2aW91c1NpemUud2lkdGggKyAiLCIgKyBwcmV2aW91c1NpemUuaGVpZ2h0KTsKCiAgICAgICAgICAgICAgICBjdXJyZW50UG9zaXRpb24ueCA9IHg7CiAgICAgICAgICAgICAgICBjdXJyZW50UG9zaXRpb24ueSA9IHk7CiAgICAgICAgICAgICAgICBjdXJyZW50UG9zaXRpb24ud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbi5oZWlnaHQgPSBoZWlnaHQ7CgogICAgICAgICAgICAgICAgaWYgKHdpZHRoICE9PSBwcmV2aW91c1NpemUud2lkdGggfHwgaGVpZ2h0ICE9PSBwcmV2aW91c1NpemUuaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgbXJhaWQuZmlyZVNpemVDaGFuZ2VFdmVudCh3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLnNldERlZmF1bHRQb3NpdGlvbiA9IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuc2V0RGVmYXVsdFBvc2l0aW9uICIgKyB4ICsgIiwiICsgeSArICIsIiArIHdpZHRoICsgIiwiICsgaGVpZ2h0KTsKICAgICAgICAgICAgICAgIGRlZmF1bHRQb3NpdGlvbi54ID0geDsKICAgICAgICAgICAgICAgIGRlZmF1bHRQb3NpdGlvbi55ID0geTsKICAgICAgICAgICAgICAgIGRlZmF1bHRQb3NpdGlvbi53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICAgICAgZGVmYXVsdFBvc2l0aW9uLmhlaWdodCA9IGhlaWdodDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLnNldEV4cGFuZFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLnNldEV4cGFuZFNpemUgIiArIHdpZHRoICsgIngiICsgaGVpZ2h0KTsKICAgICAgICAgICAgICAgIGV4cGFuZFByb3BlcnRpZXMud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgICAgIGV4cGFuZFByb3BlcnRpZXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuc2V0TWF4U2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuc2V0TWF4U2l6ZSAiICsgd2lkdGggKyAieCIgKyBoZWlnaHQpOwogICAgICAgICAgICAgICAgbWF4U2l6ZS53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICAgICAgbWF4U2l6ZS5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5zZXRQbGFjZW1lbnRUeXBlID0gZnVuY3Rpb24gKHB0KSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuc2V0UGxhY2VtZW50VHlwZSAiICsgcHQpOwogICAgICAgICAgICAgICAgcGxhY2VtZW50VHlwZSA9IHB0OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbXJhaWQuc2V0U2NyZWVuU2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuc2V0U2NyZWVuU2l6ZSAiICsgd2lkdGggKyAieCIgKyBoZWlnaHQpOwogICAgICAgICAgICAgICAgc2NyZWVuU2l6ZS53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICAgICAgc2NyZWVuU2l6ZS5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICAgICAgICB1cGRhdGVDcmVhdGl2ZVNpemUod2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgICAgICBpZiAoIWlzRXhwYW5kUHJvcGVydGllc1NldCkgewogICAgICAgICAgICAgICAgICAgIGV4cGFuZFByb3BlcnRpZXMud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICBleHBhbmRQcm9wZXJ0aWVzLmhlaWdodCA9IGhlaWdodDsKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5zZXRTdXBwb3J0cyA9IGZ1bmN0aW9uIChmZWF0dXJlLCBzdXBwb3J0ZWQpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5zZXRTdXBwb3J0cyAiICsgZmVhdHVyZSArICIgIiArIHN1cHBvcnRlZCk7CiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRGZWF0dXJlc1tmZWF0dXJlXSA9IHN1cHBvcnRlZDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIG1ldGhvZHMgdG8gZmlyZSBldmVudHMKCiAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGFjdGlvbikgewogICAgICAgICAgICAgICAgbG9nLmkoIm1yYWlkLmZpcmVFcnJvckV2ZW50ICIgKyBtZXNzYWdlICsgIiAiICsgYWN0aW9uKTsKICAgICAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuRVJST1IsIG1lc3NhZ2UsIGFjdGlvbik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5maXJlUmVhZHlFdmVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5maXJlUmVhZHlFdmVudCIpOwogICAgICAgICAgICAgICAgZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5SRUFEWSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtcmFpZC5maXJlU2l6ZUNoYW5nZUV2ZW50ID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5maXJlU2l6ZUNoYW5nZUV2ZW50ICIgKyB3aWR0aCArICJ4IiArIGhlaWdodCk7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgIT09IG1yYWlkLlNUQVRFUy5MT0FESU5HKSB7CiAgICAgICAgICAgICAgICAgICAgZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5TSVpFQ0hBTkdFLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLmZpcmVTdGF0ZUNoYW5nZUV2ZW50ID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7CiAgICAgICAgICAgICAgICBsb2cuaSgibXJhaWQuZmlyZVN0YXRlQ2hhbmdlRXZlbnQgIiArIG5ld1N0YXRlKTsKICAgICAgICAgICAgICAgIGlmIChzdGF0ZSAhPT0gbmV3U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgICAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuU1RBVEVDSEFOR0UsIHN0YXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG1yYWlkLmZpcmVWaWV3YWJsZUNoYW5nZUV2ZW50ID0gZnVuY3Rpb24gKG5ld0lzVmlld2FibGUpIHsKICAgICAgICAgICAgICAgIGxvZy5pKCJtcmFpZC5maXJlVmlld2FibGVDaGFuZ2VFdmVudCAiICsgbmV3SXNWaWV3YWJsZSk7CiAgICAgICAgICAgICAgICBpZiAoaXNWaWV3YWJsZSAhPT0gbmV3SXNWaWV3YWJsZSkgewogICAgICAgICAgICAgICAgICAgIGlzVmlld2FibGUgPSBuZXdJc1ZpZXdhYmxlOwogICAgICAgICAgICAgICAgICAgIGZpcmVFdmVudChtcmFpZC5FVkVOVFMuVklFV0FCTEVDSEFOR0UsIGlzVmlld2FibGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgICAgICAgICAgKiBpbnRlcm5hbCBoZWxwZXIgbWV0aG9kcwogICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgICAgICAgICBmdW5jdGlvbiBjYWxsTmF0aXZlKGNvbW1hbmQpIHsKICAgICAgICAgICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJJRlJBTUUiKTsKICAgICAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoInNyYyIsICJtcmFpZDovLyIgKyBjb21tYW5kKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChpZnJhbWUpOwogICAgICAgICAgICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKICAgICAgICAgICAgICAgIGlmcmFtZSA9IG51bGw7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmdW5jdGlvbiBmaXJlRXZlbnQoZXZlbnQpIHsKICAgICAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIGFyZ3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgIGxvZy5pKCJmaXJlRXZlbnQgIiArIGV2ZW50ICsgIiBbIiArIGFyZ3MudG9TdHJpbmcoKSArICJdIik7CiAgICAgICAgICAgICAgICB2YXIgZXZlbnRMaXN0ZW5lcnMgPSAobGlzdGVuZXJzW2V2ZW50XSB8fCBbXSkuc2xpY2UoMCk7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnRMaXN0ZW5lcnMpIHsKICAgICAgICAgICAgICAgICAgICBsb2cuaShldmVudExpc3RlbmVycy5sZW5ndGggKyAiIGxpc3RlbmVyKHMpIGZvdW5kIGZvciAiICsgZXZlbnQpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmkoImZpcmluZyBsaXN0ZW5lciAiICsgaSArICIgZm9yICIgKyBldmVudCArICI6ICIgKyBldmVudExpc3RlbmVyc1tpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXJzW2ldLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLmkoIm5vIGxpc3RlbmVycyBmb3VuZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgZnVuY3Rpb24gY29udGFpbnModmFsdWUsIGFycmF5KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGFycmF5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2ldID09PSB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBUaGUgYWN0aW9uIHBhcmFtZXRlciBpcyBhIHN0cmluZyB3aGljaCBpcyB0aGUgbmFtZSBvZiB0aGUgc2V0dGVyIGZ1bmN0aW9uCiAgICAgICAgICAgIC8vIHdoaWNoIGNhbGxlZCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgICAgIC8vIChpbiBvdGhlciB3b3Jkcywgc2V0RXhwYW5kUHJvcGV0aWVzLCBzZXRPcmllbnRhdGlvblByb3BlcnRpZXMsIG9yCiAgICAgICAgICAgIC8vIHNldFJlc2l6ZVByb3BlcnRpZXMpLgogICAgICAgICAgICAvLyBJdCBzZXJ2ZXMgYm90aCBhcyB0aGUga2V5IHRvIGdldCB0aGUgdGhlIGFwcHJvcHJpYXRlIHNldCBvZiB2YWxpZGF0aW5nCiAgICAgICAgICAgIC8vIGZ1bmN0aW9ucyBmcm9tIHRoZSBhbGxWYWxpZGF0b3JzIG9iamVjdAogICAgICAgICAgICAvLyBhcyB3ZWxsIGFzIHRoZSBhY3Rpb24gcGFyYW1ldGVyIG9mIGFueSBlcnJvciBldmVudCB0aGF0IG1heSBiZSB0aHJvd24uCiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BlcnRpZXMsIGFjdGlvbikgewogICAgICAgICAgICAgICAgdmFyIHJldHZhbCA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgdmFsaWRhdG9ycyA9IGFsbFZhbGlkYXRvcnNbYWN0aW9uXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gcHJvcGVydGllcykgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZGF0b3IgPSB2YWxpZGF0b3JzW3Byb3BdOwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHByb3BlcnRpZXNbcHJvcF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRvciAmJiAhdmFsaWRhdG9yKHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICBtcmFpZC5maXJlRXJyb3JFdmVudCgiVmFsdWUgb2YgcHJvcGVydHkgIiArIHByb3AgKyAiICgiICsgdmFsdWUgKyAiKSBpcyBpbnZhbGlkIiwgIm1yYWlkLiIgKyBhY3Rpb24pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR2YWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dmFsOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGFsbFZhbGlkYXRvcnMgPSB7CiAgICAgICAgICAgICAgICAic2V0RXhwYW5kUHJvcGVydGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAvLyBJbiBNUkFJRCAyLjAsIHRoZSBvbmx5IHByb3BlcnR5IGluIGV4cGFuZFByb3BlcnRpZXMgd2UgYWN0dWFsbHkgY2FyZSBhYm91dCBpcyB1c2VDdXN0b21DbG9zZS4KICAgICAgICAgICAgICAgICAgICAvLyBTdGlsbCwgd2UnbGwgZG8gYSBiYXNpYyBzYW5pdHkgY2hlY2sgb24gdGhlIHdpZHRoIGFuZCBoZWlnaHQgcHJvcGVydGllcywgdG9vLgogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6IGZ1bmN0aW9uICh3aWR0aCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKHdpZHRoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiBmdW5jdGlvbiAoaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXNOYU4oaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJ1c2VDdXN0b21DbG9zZSI6IGZ1bmN0aW9uICh1c2VDdXN0b21DbG9zZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiB1c2VDdXN0b21DbG9zZSA9PT0gImJvb2xlYW4iKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgInNldE9yaWVudGF0aW9uUHJvcGVydGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAiYWxsb3dPcmllbnRhdGlvbkNoYW5nZSI6IGZ1bmN0aW9uIChhbGxvd09yaWVudGF0aW9uQ2hhbmdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGFsbG93T3JpZW50YXRpb25DaGFuZ2UgPT09ICJib29sZWFuIik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZm9yY2VPcmllbnRhdGlvbiI6IGZ1bmN0aW9uIChmb3JjZU9yaWVudGF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZFZhbHVlcyA9IFsicG9ydHJhaXQiLCAibGFuZHNjYXBlIiwgIm5vbmUiXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgZm9yY2VPcmllbnRhdGlvbiA9PT0gInN0cmluZyIgJiYgdmFsaWRWYWx1ZXMuaW5kZXhPZihmb3JjZU9yaWVudGF0aW9uKSAhPT0gLTEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAic2V0UmVzaXplUHJvcGVydGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiBmdW5jdGlvbiAod2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpc05hTih3aWR0aCkgJiYgNTAgPD0gd2lkdGg7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogZnVuY3Rpb24gKGhlaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKGhlaWdodCkgJiYgNTAgPD0gaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIm9mZnNldFgiOiBmdW5jdGlvbiAob2Zmc2V0WCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKG9mZnNldFgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIm9mZnNldFkiOiBmdW5jdGlvbiAob2Zmc2V0WSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKG9mZnNldFkpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImN1c3RvbUNsb3NlUG9zaXRpb24iOiBmdW5jdGlvbiAoY3VzdG9tQ2xvc2VQb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWRQb3NpdGlvbnMgPSBbInRvcC1sZWZ0IiwgInRvcC1jZW50ZXIiLCAidG9wLXJpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImJvdHRvbS1sZWZ0IiwgImJvdHRvbS1jZW50ZXIiLCAiYm90dG9tLXJpZ2h0Il07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGN1c3RvbUNsb3NlUG9zaXRpb24gPT09ICJzdHJpbmciICYmIHZhbGlkUG9zaXRpb25zLmluZGV4T2YoY3VzdG9tQ2xvc2VQb3NpdGlvbikgIT09IC0xKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJhbGxvd09mZnNjcmVlbiI6IGZ1bmN0aW9uIChhbGxvd09mZnNjcmVlbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBhbGxvd09mZnNjcmVlbiA9PT0gImJvb2xlYW4iKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmdW5jdGlvbiBpc0Nsb3NlUmVnaW9uT25TY3JlZW4ocHJvcGVydGllcykgewogICAgICAgICAgICAgICAgbG9nLmQoImlzQ2xvc2VSZWdpb25PblNjcmVlbiIpOwogICAgICAgICAgICAgICAgbG9nLmQoImRlZmF1bHRQb3NpdGlvbiAiICsgZGVmYXVsdFBvc2l0aW9uLnggKyAiICIgKyBkZWZhdWx0UG9zaXRpb24ueSk7CiAgICAgICAgICAgICAgICBsb2cuZCgib2Zmc2V0ICIgKyBwcm9wZXJ0aWVzLm9mZnNldFggKyAiICIgKyBwcm9wZXJ0aWVzLm9mZnNldFkpOwoKICAgICAgICAgICAgICAgIHZhciByZXNpemVSZWN0ID0ge307CiAgICAgICAgICAgICAgICByZXNpemVSZWN0LnggPSBkZWZhdWx0UG9zaXRpb24ueCArIHByb3BlcnRpZXMub2Zmc2V0WDsKICAgICAgICAgICAgICAgIHJlc2l6ZVJlY3QueSA9IGRlZmF1bHRQb3NpdGlvbi55ICsgcHJvcGVydGllcy5vZmZzZXRZOwogICAgICAgICAgICAgICAgcmVzaXplUmVjdC53aWR0aCA9IHByb3BlcnRpZXMud2lkdGg7CiAgICAgICAgICAgICAgICByZXNpemVSZWN0LmhlaWdodCA9IHByb3BlcnRpZXMuaGVpZ2h0OwogICAgICAgICAgICAgICAgcHJpbnRSZWN0KCJyZXNpemVSZWN0IiwgcmVzaXplUmVjdCk7CgogICAgICAgICAgICAgICAgdmFyIGN1c3RvbUNsb3NlUG9zaXRpb24gPSBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KCJjdXN0b21DbG9zZVBvc2l0aW9uIikgPwogICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuY3VzdG9tQ2xvc2VQb3NpdGlvbiA6IHJlc2l6ZVByb3BlcnRpZXMuY3VzdG9tQ2xvc2VQb3NpdGlvbjsKICAgICAgICAgICAgICAgIGxvZy5kKCJjdXN0b21DbG9zZVBvc2l0aW9uICIgKyBjdXN0b21DbG9zZVBvc2l0aW9uKTsKCiAgICAgICAgICAgICAgICB2YXIgY2xvc2VSZWN0ID0geyJ3aWR0aCI6IDUwLCAiaGVpZ2h0IjogNTB9OwoKICAgICAgICAgICAgICAgIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgibGVmdCIpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIGNsb3NlUmVjdC54ID0gcmVzaXplUmVjdC54OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgiY2VudGVyIikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvc2VSZWN0LnggPSByZXNpemVSZWN0LnggKyAocmVzaXplUmVjdC53aWR0aCAvIDIpIC0gMjU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24uc2VhcmNoKCJyaWdodCIpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIGNsb3NlUmVjdC54ID0gcmVzaXplUmVjdC54ICsgcmVzaXplUmVjdC53aWR0aCAtIDUwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgidG9wIikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvc2VSZWN0LnkgPSByZXNpemVSZWN0Lnk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24gPT09ICJjZW50ZXIiKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvc2VSZWN0LnkgPSByZXNpemVSZWN0LnkgKyAocmVzaXplUmVjdC5oZWlnaHQgLyAyKSAtIDI1OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgiYm90dG9tIikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvc2VSZWN0LnkgPSByZXNpemVSZWN0LnkgKyByZXNpemVSZWN0LmhlaWdodCAtIDUwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBtYXhSZWN0ID0geyJ4IjogMCwgInkiOiAwfTsKICAgICAgICAgICAgICAgIG1heFJlY3Qud2lkdGggPSBtYXhTaXplLndpZHRoOwogICAgICAgICAgICAgICAgbWF4UmVjdC5oZWlnaHQgPSBtYXhTaXplLmhlaWdodDsKCiAgICAgICAgICAgICAgICByZXR1cm4gaXNSZWN0Q29udGFpbmVkKG1heFJlY3QsIGNsb3NlUmVjdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGZpdFJlc2l6ZVZpZXdPblNjcmVlbihwcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICBsb2cuZCgiZml0UmVzaXplVmlld09uU2NyZWVuIik7CiAgICAgICAgICAgICAgICBsb2cuZCgiZGVmYXVsdFBvc2l0aW9uICIgKyBkZWZhdWx0UG9zaXRpb24ueCArICIgIiArIGRlZmF1bHRQb3NpdGlvbi55KTsKICAgICAgICAgICAgICAgIGxvZy5kKCJvZmZzZXQgIiArIHByb3BlcnRpZXMub2Zmc2V0WCArICIgIiArIHByb3BlcnRpZXMub2Zmc2V0WSk7CgogICAgICAgICAgICAgICAgdmFyIHJlc2l6ZVJlY3QgPSB7fTsKICAgICAgICAgICAgICAgIHJlc2l6ZVJlY3QueCA9IGRlZmF1bHRQb3NpdGlvbi54ICsgcHJvcGVydGllcy5vZmZzZXRYOwogICAgICAgICAgICAgICAgcmVzaXplUmVjdC55ID0gZGVmYXVsdFBvc2l0aW9uLnkgKyBwcm9wZXJ0aWVzLm9mZnNldFk7CiAgICAgICAgICAgICAgICByZXNpemVSZWN0LndpZHRoID0gcHJvcGVydGllcy53aWR0aDsKICAgICAgICAgICAgICAgIHJlc2l6ZVJlY3QuaGVpZ2h0ID0gcHJvcGVydGllcy5oZWlnaHQ7CiAgICAgICAgICAgICAgICBwcmludFJlY3QoInJlc2l6ZVJlY3QiLCByZXNpemVSZWN0KTsKCiAgICAgICAgICAgICAgICB2YXIgbWF4UmVjdCA9IHsieCI6IDAsICJ5IjogMH07CiAgICAgICAgICAgICAgICBtYXhSZWN0LndpZHRoID0gbWF4U2l6ZS53aWR0aDsKICAgICAgICAgICAgICAgIG1heFJlY3QuaGVpZ2h0ID0gbWF4U2l6ZS5oZWlnaHQ7CgogICAgICAgICAgICAgICAgdmFyIGFkanVzdG1lbnRzID0geyJ4IjogMCwgInkiOiAwfTsKCiAgICAgICAgICAgICAgICBpZiAoaXNSZWN0Q29udGFpbmVkKG1heFJlY3QsIHJlc2l6ZVJlY3QpKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLmQoIm5vIGFkanVzdG1lbnQgbmVjZXNzYXJ5Iik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkanVzdG1lbnRzOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXNpemVSZWN0LnggPCBtYXhSZWN0LngpIHsKICAgICAgICAgICAgICAgICAgICBhZGp1c3RtZW50cy54ID0gbWF4UmVjdC54IC0gcmVzaXplUmVjdC54OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgocmVzaXplUmVjdC54ICsgcmVzaXplUmVjdC53aWR0aCkgPiAobWF4UmVjdC54ICsgbWF4UmVjdC53aWR0aCkpIHsKICAgICAgICAgICAgICAgICAgICBhZGp1c3RtZW50cy54ID0gKG1heFJlY3QueCArIG1heFJlY3Qud2lkdGgpIC0gKHJlc2l6ZVJlY3QueCArIHJlc2l6ZVJlY3Qud2lkdGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbG9nLmQoImFkanVzdG1lbnRzLnggIiArIGFkanVzdG1lbnRzLngpOwoKICAgICAgICAgICAgICAgIGlmIChyZXNpemVSZWN0LnkgPCBtYXhSZWN0LnkpIHsKICAgICAgICAgICAgICAgICAgICBhZGp1c3RtZW50cy55ID0gbWF4UmVjdC55IC0gcmVzaXplUmVjdC55OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgocmVzaXplUmVjdC55ICsgcmVzaXplUmVjdC5oZWlnaHQpID4gKG1heFJlY3QueSArIG1heFJlY3QuaGVpZ2h0KSkgewogICAgICAgICAgICAgICAgICAgIGFkanVzdG1lbnRzLnkgPSAobWF4UmVjdC55ICsgbWF4UmVjdC5oZWlnaHQpIC0gKHJlc2l6ZVJlY3QueSArIHJlc2l6ZVJlY3QuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxvZy5kKCJhZGp1c3RtZW50cy55ICIgKyBhZGp1c3RtZW50cy55KTsKCiAgICAgICAgICAgICAgICByZXNpemVSZWN0LnggPSBkZWZhdWx0UG9zaXRpb24ueCArIHByb3BlcnRpZXMub2Zmc2V0WCArIGFkanVzdG1lbnRzLng7CiAgICAgICAgICAgICAgICByZXNpemVSZWN0LnkgPSBkZWZhdWx0UG9zaXRpb24ueSArIHByb3BlcnRpZXMub2Zmc2V0WSArIGFkanVzdG1lbnRzLnk7CiAgICAgICAgICAgICAgICBwcmludFJlY3QoImFkanVzdGVkIHJlc2l6ZVJlY3QiLCByZXNpemVSZWN0KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gYWRqdXN0bWVudHM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzUmVjdENvbnRhaW5lZChjb250YWluaW5nUmVjdCwgY29udGFpbmVkUmVjdCkgewogICAgICAgICAgICAgICAgbG9nLmQoImlzUmVjdENvbnRhaW5lZCIpOwogICAgICAgICAgICAgICAgcHJpbnRSZWN0KCJjb250YWluaW5nUmVjdCIsIGNvbnRhaW5pbmdSZWN0KTsKICAgICAgICAgICAgICAgIHByaW50UmVjdCgiY29udGFpbmVkUmVjdCIsIGNvbnRhaW5lZFJlY3QpOwogICAgICAgICAgICAgICAgcmV0dXJuIChjb250YWluZWRSZWN0LnggPj0gY29udGFpbmluZ1JlY3QueCAmJgogICAgICAgICAgICAgICAgICAgIChjb250YWluZWRSZWN0LnggKyBjb250YWluZWRSZWN0LndpZHRoKSA8PSAoY29udGFpbmluZ1JlY3QueCArIGNvbnRhaW5pbmdSZWN0LndpZHRoKSAmJgogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZFJlY3QueSA+PSBjb250YWluaW5nUmVjdC55ICYmCiAgICAgICAgICAgICAgICAgICAgKGNvbnRhaW5lZFJlY3QueSArIGNvbnRhaW5lZFJlY3QuaGVpZ2h0KSA8PSAoY29udGFpbmluZ1JlY3QueSArIGNvbnRhaW5pbmdSZWN0LmhlaWdodCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwcmludFJlY3QobGFiZWwsIHJlY3QpIHsKICAgICAgICAgICAgICAgIGxvZy5kKGxhYmVsICsKICAgICAgICAgICAgICAgICAgICAiIFsiICsgcmVjdC54ICsgIiwiICsgcmVjdC55ICsgIl0iICsKICAgICAgICAgICAgICAgICAgICAiLFsiICsgKHJlY3QueCArIHJlY3Qud2lkdGgpICsgIiwiICsgKHJlY3QueSArIHJlY3QuaGVpZ2h0KSArICJdIiArCiAgICAgICAgICAgICAgICAgICAgIiAoIiArIHJlY3Qud2lkdGggKyAieCIgKyByZWN0LmhlaWdodCArICIpIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1yYWlkLmR1bXBMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgbkV2ZW50cyA9IE9iamVjdC5rZXlzKGxpc3RlbmVycykubGVuZ3RoOwogICAgICAgICAgICAgICAgbG9nLmkoImR1bXBpbmcgbGlzdGVuZXJzICgiICsgbkV2ZW50cyArICIgZXZlbnRzKSIpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgZXZlbnQgaW4gbGlzdGVuZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50TGlzdGVuZXJzID0gbGlzdGVuZXJzW2V2ZW50XTsKICAgICAgICAgICAgICAgICAgICBsb2cuaSgiICAiICsgZXZlbnQgKyAiIGNvbnRhaW5zICIgKyBldmVudExpc3RlbmVycy5sZW5ndGggKyAiIGxpc3RlbmVycyIpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmkoIiAgICAiICsgZXZlbnRMaXN0ZW5lcnNbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNUkFJRCBvYmplY3QgbG9hZGVkIik7CgogICAgICAgIH0pKCk7"

    .line 85
    invoke-static {p0, v7}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    move-result-object p0

    .line 86
    new-instance v1, Ljava/lang/String;

    invoke-direct {v1, p0}, Ljava/lang/String;-><init>([B)V

    .line 87
    new-instance p0, Ljava/lang/StringBuilder;

    const-string v3, "<script>"

    invoke-direct {p0, v3}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v1, "</script>"

    invoke-virtual {p0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p0

    const-string v5, "OyhmdW5jdGlvbihvbWlkR2xvYmFsKSB7CiAgJ3VzZSBzdHJpY3QnO3ZhciBuO2Z1bmN0aW9uIGFhKGEpe3ZhciBiPTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGI8YS5sZW5ndGg/e2RvbmU6ITEsdmFsdWU6YVtiKytdfTp7ZG9uZTohMH19fWZ1bmN0aW9uIHAoYSl7dmFyIGI9J3VuZGVmaW5lZCchPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciYmYVtTeW1ib2wuaXRlcmF0b3JdO3JldHVybiBiP2IuY2FsbChhKTp7bmV4dDphYShhKX19ZnVuY3Rpb24gcShhKXtpZighKGEgaW5zdGFuY2VvZiBBcnJheSkpe2E9cChhKTtmb3IodmFyIGIsYz1bXTshKGI9YS5uZXh0KCkpLmRvbmU7KWMucHVzaChiLnZhbHVlKTthPWN9cmV0dXJuIGF9dmFyIGJhPSdmdW5jdGlvbic9PXR5cGVvZiBPYmplY3QuY3JlYXRlP09iamVjdC5jcmVhdGU6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe31iLnByb3RvdHlwZT1hO3JldHVybiBuZXcgYn0sY2E7CmlmKCdmdW5jdGlvbic9PXR5cGVvZiBPYmplY3Quc2V0UHJvdG90eXBlT2YpY2E9T2JqZWN0LnNldFByb3RvdHlwZU9mO2Vsc2V7dmFyIGRhO2E6e3ZhciBlYT17UzohMH0sZmE9e307dHJ5e2ZhLl9fcHJvdG9fXz1lYTtkYT1mYS5TO2JyZWFrIGF9Y2F0Y2goYSl7fWRhPSExfWNhPWRhP2Z1bmN0aW9uKGEsYil7YS5fX3Byb3RvX189YjtpZihhLl9fcHJvdG9fXyE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcihhKycgaXMgbm90IGV4dGVuc2libGUnKTtyZXR1cm4gYX06bnVsbH12YXIgaGE9Y2E7CmZ1bmN0aW9uIHIoYSxiKXthLnByb3RvdHlwZT1iYShiLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTtpZihoYSloYShhLGIpO2Vsc2UgZm9yKHZhciBjIGluIGIpaWYoJ3Byb3RvdHlwZSchPWMpaWYoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLGQpfWVsc2UgYVtjXT1iW2NdO2EuQ2E9Yi5wcm90b3R5cGV9dmFyIHQ9J3VuZGVmaW5lZCchPXR5cGVvZiB3aW5kb3cmJndpbmRvdz09PXRoaXM/dGhpczondW5kZWZpbmVkJyE9dHlwZW9mIGdsb2JhbCYmbnVsbCE9Z2xvYmFsP2dsb2JhbDp0aGlzO2Z1bmN0aW9uIHUoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9CnZhciBpYT0nZnVuY3Rpb24nPT10eXBlb2YgT2JqZWN0LmFzc2lnbj9PYmplY3QuYXNzaWduOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKGQpZm9yKHZhciBlIGluIGQpdShkLGUpJiYoYVtlXT1kW2VdKX1yZXR1cm4gYX0sdz0nZnVuY3Rpb24nPT10eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXM/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXthIT1BcnJheS5wcm90b3R5cGUmJmEhPU9iamVjdC5wcm90b3R5cGUmJihhW2JdPWMudmFsdWUpfTsKZnVuY3Rpb24geShhLGIpe2lmKGIpe3ZhciBjPXQ7YT1hLnNwbGl0KCcuJyk7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aC0xO2QrKyl7dmFyIGU9YVtkXTtlIGluIGN8fChjW2VdPXt9KTtjPWNbZV19YT1hW2EubGVuZ3RoLTFdO2Q9Y1thXTtiPWIoZCk7YiE9ZCYmbnVsbCE9YiYmdyhjLGEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9fXkoJ09iamVjdC5hc3NpZ24nLGZ1bmN0aW9uKGEpe3JldHVybiBhfHxpYX0pO2Z1bmN0aW9uIGphKCl7amE9ZnVuY3Rpb24oKXt9O3QuU3ltYm9sfHwodC5TeW1ib2w9a2EpfWZ1bmN0aW9uIGxhKGEsYil7dGhpcy5hPWE7dyh0aGlzLCdkZXNjcmlwdGlvbicse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9bGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX07CnZhciBrYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYyl7aWYodGhpcyBpbnN0YW5jZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yJyk7cmV0dXJuIG5ldyBsYSgnanNjb21wX3N5bWJvbF8nKyhjfHwnJykrJ18nK2IrKyxjKX12YXIgYj0wO3JldHVybiBhfSgpO2Z1bmN0aW9uIG1hKCl7amEoKTt2YXIgYT10LlN5bWJvbC5pdGVyYXRvcjthfHwoYT10LlN5bWJvbC5pdGVyYXRvcj10LlN5bWJvbCgnU3ltYm9sLml0ZXJhdG9yJykpOydmdW5jdGlvbichPXR5cGVvZiBBcnJheS5wcm90b3R5cGVbYV0mJncoQXJyYXkucHJvdG90eXBlLGEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuYShhYSh0aGlzKSl9fSk7bWE9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIG5hKGEpe21hKCk7YT17bmV4dDphfTthW3QuU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtyZXR1cm4gYX0KeSgnV2Vha01hcCcsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihmKXt0aGlzLmE9KGwrPU1hdGgucmFuZG9tKCkrMSkudG9TdHJpbmcoKTtpZihmKXtmPXAoZik7Zm9yKHZhciBoOyEoaD1mLm5leHQoKSkuZG9uZTspaD1oLnZhbHVlLHRoaXMuc2V0KGhbMF0saFsxXSl9fWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gZChmKXtpZighdShmLGcpKXt2YXIgaD1uZXcgYzt3KGYsZyx7dmFsdWU6aH0pfX1mdW5jdGlvbiBlKGYpe3ZhciBoPU9iamVjdFtmXTtoJiYoT2JqZWN0W2ZdPWZ1bmN0aW9uKGspe2lmKGsgaW5zdGFuY2VvZiBjKXJldHVybiBrO2Qoayk7cmV0dXJuIGgoayl9KX1pZihmdW5jdGlvbigpe2lmKCFhfHwhT2JqZWN0LnNlYWwpcmV0dXJuITE7dHJ5e3ZhciBmPU9iamVjdC5zZWFsKHt9KSxoPU9iamVjdC5zZWFsKHt9KSxrPW5ldyBhKFtbZiwyXSxbaCwzXV0pO2lmKDIhPWsuZ2V0KGYpfHwzIT1rLmdldChoKSlyZXR1cm4hMTtrLmRlbGV0ZShmKTtrLnNldChoLDQpO3JldHVybiFrLmhhcyhmKSYmCjQ9PWsuZ2V0KGgpfWNhdGNoKG0pe3JldHVybiExfX0oKSlyZXR1cm4gYTt2YXIgZz0nJGpzY29tcF9oaWRkZW5fJytNYXRoLnJhbmRvbSgpO2UoJ2ZyZWV6ZScpO2UoJ3ByZXZlbnRFeHRlbnNpb25zJyk7ZSgnc2VhbCcpO3ZhciBsPTA7Yi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGYsaCl7ZChmKTtpZighdShmLGcpKXRocm93IEVycm9yKCdXZWFrTWFwIGtleSBmYWlsOiAnK2YpO2ZbZ11bdGhpcy5hXT1oO3JldHVybiB0aGlzfTtiLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZil7cmV0dXJuIHUoZixnKT9mW2ddW3RoaXMuYV06dm9pZCAwfTtiLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZil7cmV0dXJuIHUoZixnKSYmdShmW2ddLHRoaXMuYSl9O2IucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihmKXtyZXR1cm4gdShmLGcpJiZ1KGZbZ10sdGhpcy5hKT9kZWxldGUgZltnXVt0aGlzLmFdOiExfTtyZXR1cm4gYn0pOwp5KCdNYXAnLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgZj17fTtyZXR1cm4gZi5BPWYubmV4dD1mLmhlYWQ9Zn1mdW5jdGlvbiBjKGYsaCl7dmFyIGs9Zi5hO3JldHVybiBuYShmdW5jdGlvbigpe2lmKGspe2Zvcig7ay5oZWFkIT1mLmE7KWs9ay5BO2Zvcig7ay5uZXh0IT1rLmhlYWQ7KXJldHVybiBrPWsubmV4dCx7ZG9uZTohMSx2YWx1ZTpoKGspfTtrPW51bGx9cmV0dXJue2RvbmU6ITAsdmFsdWU6dm9pZCAwfX0pfWZ1bmN0aW9uIGQoZixoKXt2YXIgaz1oJiZ0eXBlb2YgaDsnb2JqZWN0Jz09a3x8J2Z1bmN0aW9uJz09az9nLmhhcyhoKT9rPWcuZ2V0KGgpOihrPScnKyArK2wsZy5zZXQoaCxrKSk6az0ncF8nK2g7dmFyIG09Zi5iW2tdO2lmKG0mJnUoZi5iLGspKWZvcihmPTA7ZjxtLmxlbmd0aDtmKyspe3ZhciB2PW1bZl07aWYoaCE9PWgmJnYua2V5IT09di5rZXl8fGg9PT12LmtleSlyZXR1cm57aWQ6ayxsaXN0Om0saW5kZXg6ZixzOnZ9fXJldHVybntpZDprLGxpc3Q6bSwKaW5kZXg6LTEsczp2b2lkIDB9fWZ1bmN0aW9uIGUoZil7dGhpcy5iPXt9O3RoaXMuYT1iKCk7dGhpcy5zaXplPTA7aWYoZil7Zj1wKGYpO2Zvcih2YXIgaDshKGg9Zi5uZXh0KCkpLmRvbmU7KWg9aC52YWx1ZSx0aGlzLnNldChoWzBdLGhbMV0pfX1pZihmdW5jdGlvbigpe2lmKCFhfHwnZnVuY3Rpb24nIT10eXBlb2YgYXx8IWEucHJvdG90eXBlLmVudHJpZXN8fCdmdW5jdGlvbichPXR5cGVvZiBPYmplY3Quc2VhbClyZXR1cm4hMTt0cnl7dmFyIGY9T2JqZWN0LnNlYWwoe3g6NH0pLGg9bmV3IGEocChbW2YsJ3MnXV0pKTtpZigncychPWguZ2V0KGYpfHwxIT1oLnNpemV8fGguZ2V0KHt4OjR9KXx8aC5zZXQoe3g6NH0sJ3QnKSE9aHx8MiE9aC5zaXplKXJldHVybiExO3ZhciBrPWguZW50cmllcygpLG09ay5uZXh0KCk7aWYobS5kb25lfHxtLnZhbHVlWzBdIT1mfHwncychPW0udmFsdWVbMV0pcmV0dXJuITE7bT1rLm5leHQoKTtyZXR1cm4gbS5kb25lfHw0IT1tLnZhbHVlWzBdLnh8fAondCchPW0udmFsdWVbMV18fCFrLm5leHQoKS5kb25lPyExOiEwfWNhdGNoKHYpe3JldHVybiExfX0oKSlyZXR1cm4gYTttYSgpO3ZhciBnPW5ldyBXZWFrTWFwO2UucHJvdG90eXBlLnNldD1mdW5jdGlvbihmLGgpe2Y9MD09PWY/MDpmO3ZhciBrPWQodGhpcyxmKTtrLmxpc3R8fChrLmxpc3Q9dGhpcy5iW2suaWRdPVtdKTtrLnM/ay5zLnZhbHVlPWg6KGsucz17bmV4dDp0aGlzLmEsQTp0aGlzLmEuQSxoZWFkOnRoaXMuYSxrZXk6Zix2YWx1ZTpofSxrLmxpc3QucHVzaChrLnMpLHRoaXMuYS5BLm5leHQ9ay5zLHRoaXMuYS5BPWsucyx0aGlzLnNpemUrKyk7cmV0dXJuIHRoaXN9O2UucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihmKXtmPWQodGhpcyxmKTtyZXR1cm4gZi5zJiZmLmxpc3Q/KGYubGlzdC5zcGxpY2UoZi5pbmRleCwxKSxmLmxpc3QubGVuZ3RofHxkZWxldGUgdGhpcy5iW2YuaWRdLGYucy5BLm5leHQ9Zi5zLm5leHQsZi5zLm5leHQuQT1mLnMuQSxmLnMuaGVhZD1udWxsLAp0aGlzLnNpemUtLSwhMCk6ITF9O2UucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5iPXt9O3RoaXMuYT10aGlzLmEuQT1iKCk7dGhpcy5zaXplPTB9O2UucHJvdG90eXBlLmhhcz1mdW5jdGlvbihmKXtyZXR1cm4hIWQodGhpcyxmKS5zfTtlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZil7cmV0dXJuKGY9ZCh0aGlzLGYpLnMpJiZmLnZhbHVlfTtlLnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcyxmdW5jdGlvbihmKXtyZXR1cm5bZi5rZXksZi52YWx1ZV19KX07ZS5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiBjKHRoaXMsZnVuY3Rpb24oZil7cmV0dXJuIGYua2V5fSl9O2UucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiBjKHRoaXMsZnVuY3Rpb24oZil7cmV0dXJuIGYudmFsdWV9KX07ZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihmLGgpe2Zvcih2YXIgaz10aGlzLmVudHJpZXMoKSxtOyEobT1rLm5leHQoKSkuZG9uZTspbT0KbS52YWx1ZSxmLmNhbGwoaCxtWzFdLG1bMF0sdGhpcyl9O2UucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09ZS5wcm90b3R5cGUuZW50cmllczt2YXIgbD0wO3JldHVybiBlfSk7eSgnT2JqZWN0LnZhbHVlcycsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbihiKXt2YXIgYz1bXSxkO2ZvcihkIGluIGIpdShiLGQpJiZjLnB1c2goYltkXSk7cmV0dXJuIGN9fSk7CnkoJ1NldCcsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjKXt0aGlzLmE9bmV3IE1hcDtpZihjKXtjPXAoYyk7Zm9yKHZhciBkOyEoZD1jLm5leHQoKSkuZG9uZTspdGhpcy5hZGQoZC52YWx1ZSl9dGhpcy5zaXplPXRoaXMuYS5zaXplfWlmKGZ1bmN0aW9uKCl7aWYoIWF8fCdmdW5jdGlvbichPXR5cGVvZiBhfHwhYS5wcm90b3R5cGUuZW50cmllc3x8J2Z1bmN0aW9uJyE9dHlwZW9mIE9iamVjdC5zZWFsKXJldHVybiExO3RyeXt2YXIgYz1PYmplY3Quc2VhbCh7eDo0fSksZD1uZXcgYShwKFtjXSkpO2lmKCFkLmhhcyhjKXx8MSE9ZC5zaXplfHxkLmFkZChjKSE9ZHx8MSE9ZC5zaXplfHxkLmFkZCh7eDo0fSkhPWR8fDIhPWQuc2l6ZSlyZXR1cm4hMTt2YXIgZT1kLmVudHJpZXMoKSxnPWUubmV4dCgpO2lmKGcuZG9uZXx8Zy52YWx1ZVswXSE9Y3x8Zy52YWx1ZVsxXSE9YylyZXR1cm4hMTtnPWUubmV4dCgpO3JldHVybiBnLmRvbmV8fGcudmFsdWVbMF09PWN8fDQhPWcudmFsdWVbMF0ueHx8CmcudmFsdWVbMV0hPWcudmFsdWVbMF0/ITE6ZS5uZXh0KCkuZG9uZX1jYXRjaChsKXtyZXR1cm4hMX19KCkpcmV0dXJuIGE7bWEoKTtiLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYyl7Yz0wPT09Yz8wOmM7dGhpcy5hLnNldChjLGMpO3RoaXMuc2l6ZT10aGlzLmEuc2l6ZTtyZXR1cm4gdGhpc307Yi5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGMpe2M9dGhpcy5hLmRlbGV0ZShjKTt0aGlzLnNpemU9dGhpcy5hLnNpemU7cmV0dXJuIGN9O2IucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5hLmNsZWFyKCk7dGhpcy5zaXplPTB9O2IucHJvdG90eXBlLmhhcz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5hLmhhcyhjKX07Yi5wcm90b3R5cGUuZW50cmllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuZW50cmllcygpfTtiLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLnZhbHVlcygpfTtiLnByb3RvdHlwZS5rZXlzPWIucHJvdG90eXBlLnZhbHVlczsKYi5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1iLnByb3RvdHlwZS52YWx1ZXM7Yi5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihjLGQpe3ZhciBlPXRoaXM7dGhpcy5hLmZvckVhY2goZnVuY3Rpb24oZyl7cmV0dXJuIGMuY2FsbChkLGcsZyxlKX0pfTtyZXR1cm4gYn0pO3koJ09iamVjdC5pcycsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbihiLGMpe3JldHVybiBiPT09Yz8wIT09Ynx8MS9iPT09MS9jOmIhPT1iJiZjIT09Y319KTt5KCdBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMnLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzO2QgaW5zdGFuY2VvZiBTdHJpbmcmJihkPVN0cmluZyhkKSk7dmFyIGU9ZC5sZW5ndGg7Yz1jfHwwO2ZvcigwPmMmJihjPU1hdGgubWF4KGMrZSwwKSk7YzxlO2MrKyl7dmFyIGc9ZFtjXTtpZihnPT09Ynx8T2JqZWN0LmlzKGcsYikpcmV0dXJuITB9cmV0dXJuITF9fSk7CnkoJ09iamVjdC5lbnRyaWVzJyxmdW5jdGlvbihhKXtyZXR1cm4gYT9hOmZ1bmN0aW9uKGIpe3ZhciBjPVtdLGQ7Zm9yKGQgaW4gYil1KGIsZCkmJmMucHVzaChbZCxiW2RdXSk7cmV0dXJuIGN9fSk7CnZhciB6PXtxYTonbG9hZGVkJyx4YTonc3RhcnQnLGthOidmaXJzdFF1YXJ0aWxlJyxzYTonbWlkcG9pbnQnLHlhOid0aGlyZFF1YXJ0aWxlJyxpYTonY29tcGxldGUnLHRhOidwYXVzZScsdmE6J3Jlc3VtZScsaGE6J2J1ZmZlclN0YXJ0JyxnYTonYnVmZmVyRmluaXNoJyx3YTonc2tpcHBlZCcsQWE6J3ZvbHVtZUNoYW5nZScsdWE6J3BsYXllclN0YXRlQ2hhbmdlJyxkYTonYWRVc2VySW50ZXJhY3Rpb24nfSxvYT17bmE6J2dlbmVyaWMnLHphOid2aWRlbycscmE6J21lZGlhJ30scWE9e1I6J25hdGl2ZScsb2E6J2h0bWwnLFA6J2phdmFzY3JpcHQnfSxyYT17UjonbmF0aXZlJyxQOidqYXZhc2NyaXB0JyxOT05FOidub25lJ30sc2E9e21hOidmdWxsJyxqYTonZG9tYWluJyxwYTonbGltaXRlZCd9LHRhPXtmYTonYmFja2dyb3VuZGVkJyxsYTonZm9yZWdyb3VuZGVkJ30sdWE9e2VhOidhcHAnLEJhOid3ZWInfTtmdW5jdGlvbiBBKGEsYil7dGhpcy54PW51bGwhPWEueD9hLng6YS5sZWZ0O3RoaXMueT1udWxsIT1hLnk/YS55OmEudG9wO3RoaXMud2lkdGg9YS53aWR0aDt0aGlzLmhlaWdodD1hLmhlaWdodDt0aGlzLmVuZFg9dGhpcy54K3RoaXMud2lkdGg7dGhpcy5lbmRZPXRoaXMueSt0aGlzLmhlaWdodDt0aGlzLmFkU2Vzc2lvbklkPWEuYWRTZXNzaW9uSWR8fHZvaWQgMDt0aGlzLmlzRnJpZW5kbHlPYnN0cnVjdGlvbkZvcj1hLmlzRnJpZW5kbHlPYnN0cnVjdGlvbkZvcnx8W107dGhpcy5iPWEuZnJpZW5kbHlPYnN0cnVjdGlvbkNsYXNzfHx2b2lkIDA7dGhpcy5jPWEuZnJpZW5kbHlPYnN0cnVjdGlvblB1cnBvc2V8fHZvaWQgMDt0aGlzLmY9YS5mcmllbmRseU9ic3RydWN0aW9uUmVhc29ufHx2b2lkIDA7dGhpcy5jbGlwc1RvQm91bmRzPXZvaWQgMCE9PWEuY2xpcHNUb0JvdW5kcz8hMD09PWEuY2xpcHNUb0JvdW5kczohMDt0aGlzLm5vdFZpc2libGVSZWFzb249YS5ub3RWaXNpYmxlUmVhc29ufHwKdm9pZCAwO3RoaXMuY2hpbGRWaWV3cz1hLmNoaWxkVmlld3N8fFtdO3RoaXMuaXNDcmVhdGl2ZT1hLmlzQ3JlYXRpdmV8fCExO3RoaXMuYT1ifWZ1bmN0aW9uIHZhKGEpe3ZhciBiPXt9O3JldHVybiBiLndpZHRoPWEud2lkdGgsYi5oZWlnaHQ9YS5oZWlnaHQsYn1mdW5jdGlvbiBDKGEpe3ZhciBiPXt9O3JldHVybiBPYmplY3QuYXNzaWduKHt9LHZhKGEpLChiLng9YS54LGIueT1hLnksYikpfWZ1bmN0aW9uIHdhKGEpe3ZhciBiPUMoYSksYz17fTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSxiLChjLmVuZFg9YS5lbmRYLGMuZW5kWT1hLmVuZFksYykpfWZ1bmN0aW9uIHhhKGEsYixjKXthLngrPWI7YS55Kz1jO2EuZW5kWCs9YjthLmVuZFkrPWN9CkEucHJvdG90eXBlLko9ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4hMTthPUMoYSk7dmFyIGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0O3JldHVybiB0aGlzLng9PT1hLngmJnRoaXMueT09PWImJnRoaXMud2lkdGg9PT1jJiZ0aGlzLmhlaWdodD09PWR9O2Z1bmN0aW9uIHlhKGEpe3JldHVybiBhLndpZHRoKmEuaGVpZ2h0fTtmdW5jdGlvbiB6YShhLGIpe2E9QyhhKTtmb3IodmFyIGM9W10sZD1bXSxlPTA7ZTxiLmxlbmd0aDtlKyspe3ZhciBnPUMoYltlXSk7Zz1BYShhLGcpO0JhKGMsZy54KTtCYShjLGcuZW5kWCk7QmEoZCxnLnkpO0JhKGQsZy5lbmRZKX1jPWMuc29ydChmdW5jdGlvbihsLGYpe3JldHVybiBsLWZ9KTtkPWQuc29ydChmdW5jdGlvbihsLGYpe3JldHVybiBsLWZ9KTtyZXR1cm57YmE6YyxjYTpkfX1mdW5jdGlvbiBBYShhLGIpe3JldHVybnt4Ok1hdGgubWF4KGEueCxiLngpLHk6TWF0aC5tYXgoYS55LGIueSksZW5kWDpNYXRoLm1pbihhLngrYS53aWR0aCxiLngrYi53aWR0aCksZW5kWTpNYXRoLm1pbihhLnkrYS5oZWlnaHQsYi55K2IuaGVpZ2h0KX19ZnVuY3Rpb24gQmEoYSxiKXstMT09PWEuaW5kZXhPZihiKSYmYS5wdXNoKGIpfTtmdW5jdGlvbiBDYSgpe3RoaXMuYj10aGlzLmE9dGhpcy51PXRoaXMubD10aGlzLmc9dGhpcy5qPXZvaWQgMDt0aGlzLm89MDt0aGlzLmg9W107dGhpcy5tPVtdO3RoaXMudj0wO3RoaXMuaT1bXTt0aGlzLmM9W107dGhpcy5mPVtdfUNhLnByb3RvdHlwZS5KPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyExOkpTT04uc3RyaW5naWZ5KERhKHRoaXMpKT09PUpTT04uc3RyaW5naWZ5KERhKGEpKX07CmZ1bmN0aW9uIERhKGEpe3ZhciBiPVtdLGM9W10sZD17dmlld3BvcnQ6YS5qLGFkVmlldzp7cGVyY2VudGFnZUluVmlldzphLm8scmVhc29uczphLmZ9LGRlY2xhcmVkRnJpZW5kbHlPYnN0cnVjdGlvbnM6YS5oLmxlbmd0aH07aWYodm9pZCAwIT09YS5hKXtkLmFkVmlldy5nZW9tZXRyeT1DKGEuYSk7ZC5hZFZpZXcuZ2VvbWV0cnkucGl4ZWxzPXlhKGEuYSk7ZC5hZFZpZXcub25TY3JlZW5HZW9tZXRyeT1DKGEuYik7ZC5hZFZpZXcub25TY3JlZW5HZW9tZXRyeS5waXhlbHM9YS52O2Zvcih2YXIgZT0wO2U8YS5jLmxlbmd0aDtlKyspYi5wdXNoKEMoYS5jW2VdKSk7Zm9yKGU9MDtlPGEubS5sZW5ndGg7ZSsrKXt2YXIgZz1hLm1bZV0sbD1nLGY9e307bC5iJiYoZi5vYnN0cnVjdGlvbkNsYXNzPWwuYik7bC5jJiYoZi5vYnN0cnVjdGlvblB1cnBvc2U9bC5jKTtsLmYmJihmLm9ic3RydWN0aW9uUmVhc29uPWwuZik7Zz1BYShhLmEsZyk7Yy5wdXNoKE9iamVjdC5hc3NpZ24oe30se3g6Zy54LAp5OmcueSx3aWR0aDpnLmVuZFgtZy54LGhlaWdodDpnLmVuZFktZy55fSxmKSl9ZC5hZFZpZXcub25TY3JlZW5HZW9tZXRyeS5vYnN0cnVjdGlvbnM9YjtkLmFkVmlldy5vblNjcmVlbkdlb21ldHJ5LmZyaWVuZGx5T2JzdHJ1Y3Rpb25zPWM7dm9pZCAwIT09YS5sJiZ2b2lkIDAhPT1hLnUmJihkLmFkVmlldy5jb250YWluZXJHZW9tZXRyeT1DKGEubCksZC5hZFZpZXcub25TY3JlZW5Db250YWluZXJHZW9tZXRyeT1DKGEudSksZC5hZFZpZXcubWVhc3VyaW5nRWxlbWVudD0hMCl9cmV0dXJuIGR9ZnVuY3Rpb24gRWEoYSxiKXtiPXZhKGIpO2Euaj17fTthLmoud2lkdGg9Yi53aWR0aDthLmouaGVpZ2h0PWIuaGVpZ2h0O2EuZz17fTthLmcueD0wO2EuZy55PTA7YS5nLndpZHRoPWIud2lkdGg7YS5nLmhlaWdodD1iLmhlaWdodDthLmcuZW5kWD1iLndpZHRoO2EuZy5lbmRZPWIuaGVpZ2h0fQpmdW5jdGlvbiBGYSgpe3JldHVybnt4OjAseTowLGVuZFg6MCxlbmRZOjAsd2lkdGg6MCxoZWlnaHQ6MH19ZnVuY3Rpb24gR2EoYSxiKXt2YXIgYz17fTtjLng9TWF0aC5tYXgoYS54LGIueCk7Yy55PU1hdGgubWF4KGEueSxiLnkpO2MuZW5kWD1NYXRoLm1pbihhLmVuZFgsYi5lbmRYKTtjLmVuZFk9TWF0aC5taW4oYS5lbmRZLGIuZW5kWSk7Yy53aWR0aD1NYXRoLm1heCgwLGMuZW5kWC1jLngpO2MuaGVpZ2h0PU1hdGgubWF4KDAsYy5lbmRZLWMueSk7cmV0dXJuIGN9ZnVuY3Rpb24gSGEoYSxiKXtyZXR1cm4gYS53aWR0aDxiLndpZHRofHxhLmhlaWdodDxiLmhlaWdodH0KZnVuY3Rpb24gSWEoYSl7dmFyIGI9eWEoYS5hKTtpZigwIT09Yil7dmFyIGM9eWEoYS5iKTt2YXIgZD1hLmMsZT0wO2lmKDA8ZC5sZW5ndGgpe3ZhciBnPXphKGEuYixkKSxsPWcuYmE7Zz1nLmNhO2Zvcih2YXIgZj0wO2Y8bC5sZW5ndGgtMTtmKyspZm9yKHZhciBoPShsW2ZdKyhsW2ZdKzEpKS8yLGs9bFtmKzFdLWxbZl0sbT0wO208Zy5sZW5ndGgtMTttKyspe2Zvcih2YXIgdj0oZ1ttXSsoZ1ttXSsxKSkvMixCPWdbbSsxXS1nW21dLHg9ITEsRj0wO0Y8ZC5sZW5ndGg7RisrKXt2YXIgSz1DKGRbRl0pO2lmKEsueDxoJiZLLngrSy53aWR0aD5oJiZLLnk8diYmSy55K0suaGVpZ2h0PnYpe3g9ITA7YnJlYWt9fXgmJihlKz1NYXRoLnJvdW5kKGspKk1hdGgucm91bmQoQikpfX1jLT1lO2I9TWF0aC5yb3VuZChjL2IqMTAwKTthLm89TWF0aC5tYXgoYiwwKTthLnY9TWF0aC5tYXgoYywwKX19CmZ1bmN0aW9uIEphKGEsYil7aWYoMCE9PWIud2lkdGgmJjAhPT1iLmhlaWdodCYmYS5iKXthPXdhKGEuYik7dmFyIGM9YS55LGQ9YS5lbmRYLGU9YS5lbmRZO2I9IShiLmVuZFg8PWEueHx8Yi54Pj1kfHxiLmVuZFk8PWN8fGIueT49ZSl9ZWxzZSBiPSExO3JldHVybiBifWZ1bmN0aW9uIEQoYSxiKXtmb3IodmFyIGM9ITEsZD0wO2Q8YS5mLmxlbmd0aDtkKyspYS5mW2RdPT09YiYmKGM9ITApO2N8fGEuZi5wdXNoKGIpfTtmdW5jdGlvbiBLYShhLGIsYyxkLGUpe3ZhciBnPW5ldyBDYTtiPW5ldyBBKGIsITEpO0VhKGcsYik7TGEoYSxiLGcsZCk7aWYoIWUpcmV0dXJuIGcuZj1bJ3VubWVhc3VyYWJsZSddLGcuaj12b2lkIDAsZy5vPTAsZy5jPVtdLGcuYSYmKGE9Zy5hLGM9e30sYT1uZXcgQSgoYy54PTAsYy55PTAsYy53aWR0aD1hLndpZHRoLGMuaGVpZ2h0PWEuaGVpZ2h0LGMpLGEuYSksZy5hPWEpLGcuYj1GYSgpLGc7aWYoJ2JhY2tncm91bmRlZCc9PT1jKUQoZywnYmFja2dyb3VuZGVkJyk7ZWxzZSBpZih2b2lkIDAhPT1nLmEpe2ZvcihhPTA7YTxnLmgubGVuZ3RoO2ErKylKYShnLGcuaFthXSkmJmcubS5wdXNoKGcuaFthXSk7Zm9yKGE9MDthPGcuaS5sZW5ndGg7YSsrKXtpZihjPUphKGcsZy5pW2FdKSl7YTp7Yz1nLmlbYV07Zm9yKGQ9MDtkPGcuYy5sZW5ndGg7ZCsrKWlmKGcuY1tkXS5KKGMpKXtjPSEwO2JyZWFrIGF9Yz0hMX1jPSFjfWMmJihEKGcsJ29ic3RydWN0ZWQnKSxnLmMucHVzaChnLmlbYV0pKX1JYShnKX1lbHNlIEQoZywKJ25vdEZvdW5kJyk7cmV0dXJuIGd9CmZ1bmN0aW9uIExhKGEsYixjLGQpe3ZhciBlPWIuaXNDcmVhdGl2ZT8hMDpiLmFkU2Vzc2lvbklkPT09ZDtpZihlKXtjLmE9Yjt2YXIgZz13YShjLmEpO2E9R2EoYy5nLGcpO3ZhciBsPWMuYTsnbm90QXR0YWNoZWQnPT09bC5ub3RWaXNpYmxlUmVhc29ufHwnbm9XaW5kb3dGb2N1cyc9PT1sLm5vdFZpc2libGVSZWFzb258fCdub0FkVmlldyc9PT1sLm5vdFZpc2libGVSZWFzb24/KEQoYywnbm90Rm91bmQnKSxjLmI9bmV3IEEoRmEoKSwhMSkpOihsPWMuYSwndmlld0ludmlzaWJsZSc9PT1sLm5vdFZpc2libGVSZWFzb258fCd2aWV3R29uZSc9PT1sLm5vdFZpc2libGVSZWFzb258fCd2aWV3Tm90VmlzaWJsZSc9PT1sLm5vdFZpc2libGVSZWFzb258fCd2aWV3QWxwaGFaZXJvJz09PWwubm90VmlzaWJsZVJlYXNvbnx8J3ZpZXdIaWRkZW4nPT09bC5ub3RWaXNpYmxlUmVhc29ufHx2b2lkIDAhPT1jLmEubm90VmlzaWJsZVJlYXNvbj8oRChjLCdoaWRkZW4nKSxjLmI9bmV3IEEoRmEoKSwKITEpKTooSGEoYSxnKSYmRChjLCdjbGlwcGVkJyksYy5iPW5ldyBBKGEsITEpKSl9ZWxzZSBpZihnPSEwLGIuYSYmKGc9LTEhPT1iLmlzRnJpZW5kbHlPYnN0cnVjdGlvbkZvci5pbmRleE9mKGQpPyExOiExPT09Yi5jbGlwc1RvQm91bmRzKSxnKXtsPWIuY2hpbGRWaWV3cztmb3IodmFyIGY9MDtmPGwubGVuZ3RoO2YrKylnPXZvaWQgMCE9PWMuYSxMYShhLG5ldyBBKGxbZl0sZyksYyxkKX1lfHx2b2lkIDA9PT1jLmF8fChiLmE/LTEhPT1iLmlzRnJpZW5kbHlPYnN0cnVjdGlvbkZvci5pbmRleE9mKGQpP2MuaC5wdXNoKGIpOmMuaS5wdXNoKGIpOihlPXdhKGIpLGQ9d2EoYy5iKSxDKGMuYiksYT1jLmIsMCE9PWEud2lkdGgmJjAhPT1hLmhlaWdodCYmYi5jbGlwc1RvQm91bmRzJiYoYj1HYShkLGUpLEhhKGIsZCkmJihEKGMsJ2NsaXBwZWQnKSxjLmI9bmV3IEEoYiwhMSkpKSkpfTtmdW5jdGlvbiBNYShhLGIpe3RoaXMueT10aGlzLng9MDt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yn07ZnVuY3Rpb24gTmEoKXtyZXR1cm57YXBpVmVyc2lvbjonMS4wJyxhY2Nlc3NNb2RlOidsaW1pdGVkJyxlbnZpcm9ubWVudDonYXBwJyxvbWlkSnNJbmZvOntvbWlkSW1wbGVtZW50ZXI6J29tc2RrJyxzZXJ2aWNlVmVyc2lvbjonMS4zLjE3LWlhYjI2NTEnfX19ZnVuY3Rpb24gT2EoKXt0aGlzLmFkU2Vzc2lvbklkPW51bGw7dGhpcy5jPU5hKCk7dGhpcy5vPW51bGw7dGhpcy5tPSdmb3JlZ3JvdW5kZWQnO3RoaXMubD10aGlzLmk9J25vbmUnO3RoaXMuaj10aGlzLmc9dGhpcy5mPXRoaXMuaD10aGlzLmE9dGhpcy5iPXRoaXMuQj10aGlzLnU9bnVsbDt0aGlzLkM9ITA7dGhpcy52PW5ldyBNYXB9dmFyIEc7ZnVuY3Rpb24gSCgpe0d8fChHPW5ldyBPYSk7cmV0dXJuIEd9O3ZhciBQYT1ldmFsKCd0aGlzJyksST1mdW5jdGlvbigpe2lmKCd1bmRlZmluZWQnIT09dHlwZW9mIG9taWRHbG9iYWwmJm9taWRHbG9iYWwpcmV0dXJuIG9taWRHbG9iYWw7aWYoJ3VuZGVmaW5lZCchPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwpcmV0dXJuIGdsb2JhbDtpZigndW5kZWZpbmVkJyE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdylyZXR1cm4gd2luZG93O2lmKCd1bmRlZmluZWQnIT09dHlwZW9mIFBhJiZQYSlyZXR1cm4gUGE7dGhyb3cgRXJyb3IoJ0NvdWxkIG5vdCBkZXRlcm1pbmUgZ2xvYmFsIG9iamVjdCBjb250ZXh0LicpO30oKTtmdW5jdGlvbiBRYShhLGIpe3RoaXMuYT1hO3RoaXMuYj1ifXQuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUWEucHJvdG90eXBlLHtldmVudDp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX19LG9yaWdpbjp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYn19fSk7ZnVuY3Rpb24gSihhKXtmb3IodmFyIGI9W10sYz0wO2M8YXJndW1lbnRzLmxlbmd0aDsrK2MpYltjXT1hcmd1bWVudHNbY107UmEoZnVuY3Rpb24oKXt0aHJvdyBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KEVycm9yLFtudWxsLCdDb3VsZCBub3QgY29tcGxldGUgdGhlIHRlc3Qgc3VjY2Vzc2Z1bGx5IC0gJ10uY29uY2F0KHEoYikpKSk7fSxmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUscShiKSl9KX1mdW5jdGlvbiBTYShhKXtmb3IodmFyIGI9W10sYz0wO2M8YXJndW1lbnRzLmxlbmd0aDsrK2MpYltjXT1hcmd1bWVudHNbY107UmEoZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSxxKGIpKX0pfQpmdW5jdGlvbiBSYShhLGIpeyd1bmRlZmluZWQnIT09dHlwZW9mIGphc21pbmUmJmphc21pbmU/YSgpOid1bmRlZmluZWQnIT09dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmIoKX07ZnVuY3Rpb24gVGEoKXt0aGlzLmY9W107dGhpcy5iPVtdO3RoaXMuYz1bXTt0aGlzLmc9W107dGhpcy5pPXt9O3RoaXMuYT1IKCl9ZnVuY3Rpb24gVWEoYSl7YS5mPVtdO2EuYj1bXTthLmM9W107YS5nPVtdO2EuaT17fTtHLmFkU2Vzc2lvbklkPW51bGw7Ry5jPU5hKCk7Ry5vPW51bGw7Ry5HPXZvaWQgMDtHLks9dm9pZCAwO0cuSD1udWxsO0cuST1udWxsO0cuRD1udWxsO0cubT0nZm9yZWdyb3VuZGVkJztHLmk9J25vbmUnO0cubD0nbm9uZSc7Ry51PW51bGw7Ry5CPW51bGw7Ry5iPW51bGw7Ry5hPW51bGw7Ry5oPW51bGw7Ry5mPW51bGw7Ry5nPW51bGw7Ry5qPW51bGw7Ry5DPSEwO0cudj1uZXcgTWFwfQpmdW5jdGlvbiBWYShhLGIpe3ZvaWQgMCE9PWEuYSYmYS5hLmFkU2Vzc2lvbklkJiYhMSE9PVdhKGEsYikmJmEuYy5maWx0ZXIoZnVuY3Rpb24oYyl7cmV0dXJuIGMudHlwZT09PWIuZXZlbnQudHlwZX0pLmZvckVhY2goZnVuY3Rpb24oYyl7cmV0dXJuIGEuaChjLkYsYi5ldmVudCl9KX1mdW5jdGlvbiBYYShhLGIpe2EuZi5wdXNoKGIpO1ZhKGEsYil9ZnVuY3Rpb24gWWEoYSxiLGMpe3ZvaWQgMCE9PWEuYSYmYS5hLmFkU2Vzc2lvbklkJiZhLmYuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBkLmV2ZW50LnR5cGU9PT1iJiZXYShhLGQpfSkubWFwKGZ1bmN0aW9uKGQpe3JldHVybiBkLmV2ZW50fSkuZm9yRWFjaChjKX0KZnVuY3Rpb24gV2EoYSxiKXt2YXIgYz1iLmV2ZW50LnR5cGUsZD0tMSE9PU9iamVjdC52YWx1ZXMoeikuaW5kZXhPZihjKSYmJ3ZvbHVtZUNoYW5nZSchPT1jO3JldHVybidpbXByZXNzaW9uJz09PWN8fCdsb2FkZWQnPT09YyYmYS5hLmE/Yi5vcmlnaW49PT1IKCkubDpkP2Iub3JpZ2luPT09SCgpLmk6ITB9ZnVuY3Rpb24gWmEoYSxiLGMpeydtZWRpYSc9PT1ifHwndmlkZW8nPT09Yj8kYShhLGMpOihhLmMucHVzaCh7dHlwZTpiLEY6Y30pLFlhKGEsYixjKSl9ZnVuY3Rpb24gJGEoYSxiKXtPYmplY3Qua2V5cyh6KS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2M9eltjXTthLmMucHVzaCh7dHlwZTpjLEY6Yn0pO1lhKGEsYyxiKX0pfWZ1bmN0aW9uIGFiKGEsYixjLGQpe3ZhciBlPXtPOmMsTDpkLEY6Yn07YS5nLnB1c2goZSk7YS5iLmZvckVhY2goZnVuY3Rpb24oZyl7dmFyIGw9YmIoZyk7J3Nlc3Npb25TdGFydCc9PT1nLmV2ZW50LnR5cGUmJmNiKGEsbCxlKTthLmgoYixsKX0pfQpmdW5jdGlvbiBkYihhLGIsYyl7dmFyIGQ9TChhLCdzZXNzaW9uRXJyb3InLCduYXRpdmUnLHtlcnJvclR5cGU6YixtZXNzYWdlOmN9KTthLmIucHVzaChkKTthLmcuZm9yRWFjaChmdW5jdGlvbihlKXthLmgoZS5GLGQuZXZlbnQpfSl9ZnVuY3Rpb24gZWIoYSxiKXthLmk9T2JqZWN0LmFzc2lnbihhLmksYik7Yj1hLmEuYztpZih2b2lkIDAhPT1iKXtiPU9iamVjdC5hc3NpZ24oe30sZmIoYSxnYihhLHtjb250ZXh0OmJ9KSwhMCkse3N1cHBvcnRzTG9hZGVkRXZlbnQ6ISFhLmEuYXx8J3ZpZGVvJz09YS5hLmJ9KTtPYmplY3QuYXNzaWduKGIse3BhZ2VVcmw6bnVsbCxjb250ZW50VXJsOmEuYS5vfSk7dmFyIGM9TChhLCdzZXNzaW9uU3RhcnQnLCduYXRpdmUnLGIpO2EuYi5wdXNoKGMpO2EuZy5mb3JFYWNoKGZ1bmN0aW9uKGQpe3ZhciBlPWQuRixnPWJiKGMpO2NiKGEsZyxkKTthLmgoZSxnKX0sYSk7aGIoYSl9fQpmdW5jdGlvbiBjYihhLGIsYyl7Yy5PJiYoYi5kYXRhLnZlcmlmaWNhdGlvblBhcmFtZXRlcnM9YS5pW2MuT10pO2MuTCYmKGM9YS5hLnYuZ2V0KGMuTCkpJiYoYi5kYXRhLnZlcmlmaWNhdGlvblBhcmFtZXRlcnM9Yy52ZXJpZmljYXRpb25QYXJhbWV0ZXJzLGIuZGF0YS5jb250ZXh0LmFjY2Vzc01vZGU9Yy5hY2Nlc3NNb2RlLCdmdWxsJz09PWMuYWNjZXNzTW9kZSYmKGEuYS5nJiYoYi5kYXRhLmNvbnRleHQudmlkZW9FbGVtZW50PWEuYS5nKSxhLmEuZiYmKGIuZGF0YS5jb250ZXh0LnNsb3RFbGVtZW50PWEuYS5mKSkpfWZ1bmN0aW9uIGliKGEpe3ZhciBiPWEuZyxjPUwoYSwnc2Vzc2lvbkZpbmlzaCcsJ25hdGl2ZScpO2EuYi5wdXNoKGMpO3ZhciBkPWEuYS5jO2QmJiduYXRpdmUnPT1kLmFkU2Vzc2lvblR5cGV8fFVhKGEpO2IuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gYS5oKGUuRixjLmV2ZW50KX0pfQpUYS5wcm90b3R5cGUuaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPTE7ZDxhcmd1bWVudHMubGVuZ3RoOysrZCljW2QtMV09YXJndW1lbnRzW2RdO3RyeXthLmFwcGx5KG51bGwscShjKSl9Y2F0Y2goZSl7U2EoZSl9fTtmdW5jdGlvbiBqYihhLGIpe3ZhciBjPShjPUgoKS5EKT9EYShjKTp2b2lkIDA7Yz1mYihhLGdiKGEsYykpO1hhKGEsTChhLCdpbXByZXNzaW9uJyxiLGMpKX1mdW5jdGlvbiBrYihhLGIsYyl7aWYoYS5hLmF8fCdkaXNwbGF5JyE9YS5hLmIpYj1MKGEsJ2xvYWRlZCcsYixmYihhLGdiKGEsdm9pZCAwPT09Yz9udWxsOmMpKSksWGEoYSxiKX0KZnVuY3Rpb24gbGIoYSxiLGMsZCl7J3N0YXJ0JyE9PWImJid2b2x1bWVDaGFuZ2UnIT09Ynx8bnVsbCE9KGQmJmQuZGV2aWNlVm9sdW1lKXx8KGQuZGV2aWNlVm9sdW1lPWEuYS51KTtpZihkJiYoJ3N0YXJ0Jz09PWJ8fCd2b2x1bWVDaGFuZ2UnPT09Yikpe3ZhciBlPWQudmlkZW9QbGF5ZXJWb2x1bWUsZz1kLm1lZGlhUGxheWVyVm9sdW1lO251bGwhPWU/KE9iamVjdC5hc3NpZ24oZCx7bWVkaWFQbGF5ZXJWb2x1bWU6ZX0pLGEuYS5CPWUpOm51bGwhPWcmJihPYmplY3QuYXNzaWduKGQse3ZpZGVvUGxheWVyVm9sdW1lOmd9KSxhLmEuQj1nKX1YYShhLEwoYSxiLGMsZCkpfQpmdW5jdGlvbiBoYihhKXt2YXIgYj1hLmEuaSxjPWEuZi5maWx0ZXIoZnVuY3Rpb24obCl7cmV0dXJuIE9iamVjdC52YWx1ZXMoeikuaW5jbHVkZXMobC5ldmVudC50eXBlKSYmbC5vcmlnaW49PT1ifSkubWFwKGZ1bmN0aW9uKGwpe3JldHVybiBsLmV2ZW50fSksZD1hLmEuYWRTZXNzaW9uSWR8fCcnLGU9e307Yz1wKGMpO2Zvcih2YXIgZz1jLm5leHQoKTshZy5kb25lO2U9e3c6ZS53fSxnPWMubmV4dCgpKXtlLnc9Zy52YWx1ZTtlLncuYWRTZXNzaW9uSWR8fChlLncuYWRTZXNzaW9uSWQ9ZCk7aWYoJ2xvYWRlZCc9PWUudy50eXBlKXtpZighYS5hLmEmJidkaXNwbGF5Jz09YS5hLmIpY29udGludWU7ZS53LmRhdGE9ZmIoYSxnYihhLGUudy5kYXRhKSl9YS5jLmZpbHRlcihmdW5jdGlvbihsKXtyZXR1cm4gZnVuY3Rpb24oZil7cmV0dXJuIGYudHlwZT09PWwudy50eXBlfX0oZSkpLmZvckVhY2goZnVuY3Rpb24obCl7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBmLkYobC53KX19KGUpKX19CmZ1bmN0aW9uIG1iKGEsYixjKXthOntjPW5ldyBTZXQoYyk7YT1wKGEuZi5jb25jYXQoYS5iKSk7Zm9yKHZhciBkPWEubmV4dCgpOyFkLmRvbmU7ZD1hLm5leHQoKSlpZihkPWQudmFsdWUsYy5oYXMoZC5ldmVudC50eXBlKSYmZC5vcmlnaW4hPWIpe2I9ITA7YnJlYWsgYX1iPSExfXJldHVybiBiPyhKKCdFdmVudCBvd25lciBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhZnRlciBpdHMgZXZlbnRzIGhhdmUgYWxyZWFkeSBiZWVuIHB1Ymxpc2hlZC4nKSwhMSk6ITB9ZnVuY3Rpb24gbmIoYSxiKXttYihhLGIsT2JqZWN0LnZhbHVlcyh6KSkmJk0oYSxiKSYmKGEuYS5pPWIpfWZ1bmN0aW9uIG9iKGEsYil7bWIoYSxiLFsnaW1wcmVzc2lvbiddKSYmcGIoYSxiKSYmKGEuYS5sPWIpfWZ1bmN0aW9uIHBiKGEsYil7dmFyIGM9YS5hLmw7cmV0dXJuJ25vbmUnIT1jJiZjIT1iPyhKKCdJbXByZXNzaW9uIGV2ZW50IGlzIG93bmVkIGJ5ICcrKGEuYS5sKycsIG5vdCAnKSsoYisnLicpKSwhMSk6ITB9CmZ1bmN0aW9uIE0oYSxiKXt2YXIgYz1hLmEuaTtyZXR1cm4nbm9uZSchPWMmJmMhPWI/KEooJ01lZGlhIGV2ZW50cyBhcmUgb3duZWQgYnkgJysoYS5hLmkrJywgbm90ICcrYisnLicpKSwhMSk6ITB9ZnVuY3Rpb24gZmIoYSxiLGMpe2M9dm9pZCAwPT09Yz8hMTpjO2I9T2JqZWN0LmFzc2lnbih7fSxiKTthLmEuYiYmT2JqZWN0LmFzc2lnbihiLHttZWRpYVR5cGU6YS5hLmJ9KTthLmEuYSYmKGN8fCdkZWZpbmVkQnlKYXZhU2NyaXB0JyE9PWEuYS5hKSYmT2JqZWN0LmFzc2lnbihiLHtjcmVhdGl2ZVR5cGU6YS5hLmF9KTtyZXR1cm4gYn1mdW5jdGlvbiBnYihhLGIpe3JldHVybiBhLmEuaD9PYmplY3QuYXNzaWduKHt9LGIse2ltcHJlc3Npb25UeXBlOmEuYS5ofSk6Yn1mdW5jdGlvbiBMKGEsYixjLGQpe3JldHVybiBuZXcgUWEoe2FkU2Vzc2lvbklkOmEuYS5hZFNlc3Npb25JZHx8JycsdGltZXN0YW1wOihuZXcgRGF0ZSkuZ2V0VGltZSgpLHR5cGU6YixkYXRhOmR9LGMpfQpmdW5jdGlvbiBiYihhKXthPWEuZXZlbnQ7cmV0dXJue2FkU2Vzc2lvbklkOmEuYWRTZXNzaW9uSWQsdGltZXN0YW1wOmEudGltZXN0YW1wLHR5cGU6YS50eXBlLGRhdGE6YS5kYXRhfX07ZnVuY3Rpb24gcWIoYSxiLGMpeydjb250YWluZXInPT09YiYmdm9pZCAwIT09YS5hLkcmJnZvaWQgMCE9PWEuYSYmbnVsbCE9YS5hLmFkU2Vzc2lvbklkJiYoYS5hLkg9S2EoYS5jLGEuYS5HLGEuYS5tLGEuYS5hZFNlc3Npb25JZCwhMCkpO2I9YS5hO3ZhciBkPWIuSCxlPWIuSTtpZihkKWlmKGUpe2I9bmV3IENhO3ZhciBnPWQuaixsPWQuYSxmPWQuYixoPWUuYTtlPWUuYjtnJiZsJiZmJiZoJiZlJiYoRWEoYixnKSxiLmw9bmV3IEEobCwhMSksYi51PW5ldyBBKGYsITEpLGIuaT1PYmplY3QuYXNzaWduKFtdLGQuaSksYi5jPU9iamVjdC5hc3NpZ24oW10sZC5jKSxiLmg9T2JqZWN0LmFzc2lnbihbXSxkLmgpLGIubT1PYmplY3QuYXNzaWduKFtdLGQubSksYi5mPU9iamVjdC5hc3NpZ24oW10sZC5mKSxkPWIubC54LGc9Yi5sLnksaD1uZXcgQShoLCExKSxlPW5ldyBBKGUsITEpLHhhKGgsZCxnKSx4YShlLGQsZyksYi5hPWgsYi5iPUdhKGUsZiksLTE9PT1iLmYuaW5kZXhPZignYmFja2dyb3VuZGVkJykmJgpJYShiKSl9ZWxzZSBiPWQ7ZWxzZSBiPW51bGw7Zj1hLmEuRDtpZihiJiYhYi5KKGYpfHxjKWY9RGEoYiksYyYmKGYuYWRWaWV3LnJlYXNvbnM9Zi5hZFZpZXcucmVhc29uc3x8W2NdKSxjPWEuYiwnYXVkaW8nIT1jLmEuYSYmWGEoYyxMKGMsJ2dlb21ldHJ5Q2hhbmdlJywnbmF0aXZlJyxmKSksYS5hLkQ9Yn07ZnVuY3Rpb24gTihhKXtyZXR1cm4nb2JqZWN0Jz09PXR5cGVvZiBhfWZ1bmN0aW9uIHJiKGEpe3JldHVybidudW1iZXInPT09dHlwZW9mIGEmJiFpc05hTihhKSYmMDw9YX1mdW5jdGlvbiBPKGEpe3JldHVybidzdHJpbmcnPT09dHlwZW9mIGF9ZnVuY3Rpb24gUChhLGIpe3JldHVybiBPKGEpJiYtMSE9PU9iamVjdC52YWx1ZXMoYikuaW5kZXhPZihhKX1mdW5jdGlvbiBzYihhKXt2YXIgYj1hJiZhLnRhZ05hbWUmJidpZnJhbWUnPT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7dHJ5e2I9YiYmYSBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50fWNhdGNoKGMpe31yZXR1cm4gYn1mdW5jdGlvbiB0YihhKXt2YXIgYj1hJiZhLnRhZ05hbWU7dHJ5e2I9YiYmYSBpbnN0YW5jZW9mIGEub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5IVE1MRWxlbWVudH1jYXRjaChjKXt9cmV0dXJuIGJ9CmZ1bmN0aW9uIHViKGEpe3ZhciBiPWEmJmEudGFnTmFtZSYmJ3ZpZGVvJz09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpO3RyeXtiPWImJmEgaW5zdGFuY2VvZiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuSFRNTFZpZGVvRWxlbWVudH1jYXRjaChjKXt9cmV0dXJuIGJ9O2Z1bmN0aW9uIFEoYSxiLGMpe3RoaXMuZj1hO3RoaXMuSz1iO3RoaXMuRz1jO3RoaXMuYz1IKCk7dGhpcy5iPW51bGw7dGhpcy5hPXRoaXMuZz10aGlzLnU9dm9pZCAwO3RoaXMuST0hMDt0aGlzLkI9dm9pZCAwO1IodGhpcyl9ZnVuY3Rpb24gUihhKXtpZighYS5iKXt2YXIgYjthOntpZigoYj1hLmYuZG9jdW1lbnQpJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJihiPWIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb21pZC1lbGVtZW50JykpKXtpZigxPT1iLmxlbmd0aCl7Yj1iWzBdO2JyZWFrIGF9MTxiLmxlbmd0aCYmYS5JJiYoZGIoYS5HLCdnZW5lcmljJywiTW9yZSB0aGFuIG9uZSBlbGVtZW50IHdpdGggJ29taWQtZWxlbWVudCcgY2xhc3MgbmFtZS4iKSxhLkk9ITEpfWI9bnVsbH1pZih1YihiKSlhLmMuZz1iO2Vsc2UgaWYodGIoYikpYS5jLmY9YjtlbHNlIHJldHVybjt2YihhKX19CmZ1bmN0aW9uIHZiKGEpe2EuYy5nPyhhLmI9YS5jLmcsYS5pKCkpOmEuYy5mJiYoYS5iPWEuYy5mLHNiKGEuYik/YS5jLmomJmEuaSgpOmEuaSgpKX1mdW5jdGlvbiB3YihhKXthLmEmJihzYihhLmIpP2EuYy5qJiYoYS5EKCkseGIoYSkpOihhLkQoKSx4YihhKSkpfVEucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLmYuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsdGhpcy5CKSx0aGlzLkI9dm9pZCAwKX07US5wcm90b3R5cGUuaT1mdW5jdGlvbigpe307ZnVuY3Rpb24geGIoYSl7YS51JiYoYS5jLkk9YS51LHFiKGEuSywnY3JlYXRpdmUnKSl9ZnVuY3Rpb24geWIoYSl7aWYoYS5hJiZhLmMuail7dmFyIGI9bmV3IEEoYS5jLmosITEpO3hhKGIsYS5hLngsYS5hLnkpO2IuY2xpcHNUb0JvdW5kcz0hMDtyZXR1cm4gYn19O2Z1bmN0aW9uIHpiKGEsYixjKXtyZXR1cm4gQWIoYSwnc2V0SW50ZXJ2YWwnKShiLGMpfWZ1bmN0aW9uIEJiKGEsYil7QWIoYSwnY2xlYXJJbnRlcnZhbCcpKGIpfWZ1bmN0aW9uIENiKGEsYil7QWIoYSwnY2xlYXJUaW1lb3V0JykoYil9ZnVuY3Rpb24gQWIoYSxiKXtyZXR1cm4gYS5hJiZhLmFbYl0/YS5hW2JdOkRiKGEsYil9CmZ1bmN0aW9uIEViKGEsYixjLGQpe2lmKGEuYS5kb2N1bWVudCYmYS5hLmRvY3VtZW50LmJvZHkpe3ZhciBlPWEuYS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtlLndpZHRoPTE7ZS5oZWlnaHQ9MTtlLnN0eWxlLmRpc3BsYXk9J25vbmUnO2Uuc3JjPWI7YyYmZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxmdW5jdGlvbigpe3JldHVybiBjKCl9KTtkJiZlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxmdW5jdGlvbigpe3JldHVybiBkKCl9KTthLmEuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKX1lbHNlIERiKGEsJ3NlbmRVcmwnKShiLGMsZCl9ZnVuY3Rpb24gRGIoYSxiKXtpZihhLmEmJmEuYS5vbWlkTmF0aXZlJiZhLmEub21pZE5hdGl2ZVtiXSlyZXR1cm4gYS5hLm9taWROYXRpdmVbYl0uYmluZChhLmEub21pZE5hdGl2ZSk7dGhyb3cgRXJyb3IoJ05hdGl2ZSBpbnRlcmZhY2UgbWV0aG9kICInK2IrJyIgbm90IGZvdW5kLicpO307ZnVuY3Rpb24gUyhhLGIsYyxkLGUpe1EuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLmw9Yjt0aGlzLmg9dm9pZCAwO3RoaXMuaj1kfXIoUyxRKTtTLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5oJiYoQmIodGhpcy5qLHRoaXMuaCksdGhpcy5oPXZvaWQgMCk7US5wcm90b3R5cGUubS5jYWxsKHRoaXMpfTtTLnByb3RvdHlwZS5pPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztRLnByb3RvdHlwZS5pLmNhbGwodGhpcyk7bnVsbD09dGhpcy5iP3RoaXMuaD12b2lkIDA6dm9pZCAwPT09dGhpcy5oJiYodGhpcy5oPXpiKHRoaXMuaixmdW5jdGlvbigpe3JldHVybiBGYihhKX0sMjAwKSxGYih0aGlzKSl9OwpTLnByb3RvdHlwZS5EPWZ1bmN0aW9uKCl7aWYodGhpcy5nKXt2YXIgYT15Yih0aGlzKTtpZihhKXt0aGlzLmEuaXNDcmVhdGl2ZT0hMTthLmlzQ3JlYXRpdmU9ITA7Zm9yKHZhciBiPSExLGM9MDtjPHRoaXMuYS5jaGlsZFZpZXdzLmxlbmd0aDtjKyspaWYodGhpcy5hLmNoaWxkVmlld3NbY10uaXNDcmVhdGl2ZSl7dGhpcy5hLmNoaWxkVmlld3NbY109YTtiPSEwO2JyZWFrfWJ8fHRoaXMuYS5jaGlsZFZpZXdzLnB1c2goYSl9ZWxzZSB0aGlzLmEuaXNDcmVhdGl2ZT0hMDt0aGlzLnU9S2EodGhpcy5sLHRoaXMuZyx0aGlzLmMubSx0aGlzLmMuYWRTZXNzaW9uSWQsdGhpcy5DKCkpfX07Uy5wcm90b3R5cGUuQz1mdW5jdGlvbigpe3JldHVybiEwfTsKZnVuY3Rpb24gRmIoYSl7aWYodm9pZCAwIT09YS5oKXtiOnt0cnl7dmFyIGI9YS5mLnRvcDt2YXIgYz0wPD1iLmlubmVySGVpZ2h0JiYwPD1iLmlubmVyV2lkdGg7YnJlYWsgYn1jYXRjaChkKXt9Yz0hMX1jPyhjPWEuZi50b3AsYz1uZXcgQShuZXcgTWEoYy5pbm5lcldpZHRoLGMuaW5uZXJIZWlnaHQpLCExKSk6Yz1uZXcgQShuZXcgTWEoMCwwKSwhMSk7Yj1hLmIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYobnVsbD09Yi54fHxpc05hTihiLngpKWIueD1iLmxlZnQ7aWYobnVsbD09Yi55fHxpc05hTihiLnkpKWIueT1iLnRvcDtiPW5ldyBBKGIsITEpO2MuSihhLmcpJiZiLkooYS5hKXx8KGEuYT1iLGEuYS5jbGlwc1RvQm91bmRzPSEwLGEuZz1jLGEuZy5jaGlsZFZpZXdzLnB1c2goYS5hKSx3YihhKSl9fTtmdW5jdGlvbiBUKGEsYixjLGQpe1EuY2FsbCh0aGlzLGEsYyxkKTt0aGlzLm89dGhpcy5qPXRoaXMubD10aGlzLmg9dm9pZCAwO3RoaXMuSD0hMTt0aGlzLnY9dm9pZCAwfXIoVCxRKTtULnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dGhpcy5oJiZ0aGlzLmguZGlzY29ubmVjdCgpO0diKHRoaXMpO1EucHJvdG90eXBlLm0uY2FsbCh0aGlzKX07VC5wcm90b3R5cGUuaT1mdW5jdGlvbigpe1EucHJvdG90eXBlLmkuY2FsbCh0aGlzKTt0aGlzLmImJih0aGlzLmh8fCh0aGlzLmg9SGIodGhpcykpLEliKHRoaXMpLEpiKHRoaXMuYikmJktiKHRoaXMpKX07ClQucHJvdG90eXBlLkQ9ZnVuY3Rpb24oKXtpZih0aGlzLmEmJnRoaXMudil7dmFyIGE9eWIodGhpcyk7aWYoYSl7dmFyIGI9YTt2YXIgYz10aGlzLnY7dmFyIGQ9TWF0aC5tYXgoYS54LGMueCk7dmFyIGU9TWF0aC5tYXgoYS55LGMueSksZz1NYXRoLm1pbihhLmVuZFgsYy5lbmRYKTthPU1hdGgubWluKGEuZW5kWSxjLmVuZFkpO2c8PWR8fGE8PWU/ZD1udWxsOihjPXt9LGQ9bmV3IEEoKGMueD1kLGMueT1lLGMud2lkdGg9TWF0aC5hYnMoZy1kKSxjLmhlaWdodD1NYXRoLmFicyhhLWUpLGMpLCExKSk7ZHx8KGQ9bmV3IEEoe3g6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MH0sITEpKX1lbHNlIGI9dGhpcy5hLGQ9dGhpcy52O2U9bmV3IENhO3RoaXMuZyYmRWEoZSx0aGlzLmcpO2UuYT1iO2UuYj1kO0lhKGUpO3RoaXMuSD8xMDAhPT1lLm8mJkQoZSwnY2xpcHBlZCcpOkQoZSwndmlld3BvcnQnKTt0aGlzLnU9ZX19O1QucHJvdG90eXBlLkM9ZnVuY3Rpb24oKXtyZXR1cm4hMH07CmZ1bmN0aW9uIEdiKGEpe2EubCYmKGEubC5kaXNjb25uZWN0KCksYS5sPXZvaWQgMCk7YS5qJiYoYS5qLmRpc2Nvbm5lY3QoKSxhLmo9dm9pZCAwKTthLm8mJigoMCxhLmYucmVtb3ZlRXZlbnRMaXN0ZW5lcikoJ3Jlc2l6ZScsYS5vKSxhLm89dm9pZCAwKX1mdW5jdGlvbiBJYihhKXthLmgmJmEuYiYmKGEuaC51bm9ic2VydmUoYS5iKSxhLmgub2JzZXJ2ZShhLmIpKX1mdW5jdGlvbiBKYihhKXthPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIDA9PWEud2lkdGh8fDA9PWEuaGVpZ2h0fQpmdW5jdGlvbiBIYihhKXtyZXR1cm4gbmV3IGEuZi5JbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbihiKXt0cnl7aWYoYi5sZW5ndGgpe2Zvcih2YXIgYyxkPWJbMF0sZT0xO2U8Yi5sZW5ndGg7ZSsrKWJbZV0udGltZT5kLnRpbWUmJihkPWJbZV0pO2M9ZDthLmc9TGIoYy5yb290Qm91bmRzKTthLmE9TGIoYy5ib3VuZGluZ0NsaWVudFJlY3QpO2Eudj1MYihjLmludGVyc2VjdGlvblJlY3QpO2EuSD0hIWMuaXNJbnRlcnNlY3Rpbmc7d2IoYSl9fWNhdGNoKGcpe2EubSgpLGRiKGEuRywnZ2VuZXJpYycsJ1Byb2JsZW0gaGFuZGxpbmcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgY2FsbGJhY2s6ICcrZy5tZXNzYWdlKX19LHtyb290Om51bGwscm9vdE1hcmdpbjonMHB4Jyx0aHJlc2hvbGQ6WzAsLjEsLjIsLjMsLjQsLjUsLjYsLjcsLjgsLjksMV19KX0KZnVuY3Rpb24gS2IoYSl7YS5mLlJlc2l6ZU9ic2VydmVyP2EubHx8KGEubD1NYihhLGZ1bmN0aW9uKCl7cmV0dXJuIE9iKGEpfSksYS5sLm9ic2VydmUoYS5iKSk6KGEub3x8KGEubz1mdW5jdGlvbigpe3JldHVybiBPYihhKX0sKDAsYS5mLmFkZEV2ZW50TGlzdGVuZXIpKCdyZXNpemUnLGEubykpLGEuanx8KGEuaj1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpe3JldHVybiBPYihhKX0pLGEuai5vYnNlcnZlKGEuYix7Y2hpbGRMaXN0OiExLGF0dHJpYnV0ZXM6ITAsc3VidHJlZTohMX0pKSl9ZnVuY3Rpb24gT2IoYSl7YS5iJiYhSmIoYS5iKSYmKEliKGEpLEdiKGEpKX1mdW5jdGlvbiBNYihhLGIpe3JldHVybiBuZXcgYS5mLlJlc2l6ZU9ic2VydmVyKGIpfWZ1bmN0aW9uIExiKGEpe2lmKGEmJm51bGwhPT1hLngmJm51bGwhPT1hLnkmJm51bGwhPT1hLndpZHRoJiZudWxsIT09YS5oZWlnaHQpcmV0dXJuIG5ldyBBKGEsITEpfTtmdW5jdGlvbiBQYihhKXtyZXR1cm4gYSYmTihhKT9PYmplY3QuZW50cmllcyhhKS5yZWR1Y2UoZnVuY3Rpb24oYixjKXt2YXIgZD1wKGMpO2M9ZC5uZXh0KCkudmFsdWU7ZD1kLm5leHQoKS52YWx1ZTtyZXR1cm4gYiYmTyhjKSYmbnVsbCE9ZCYmTihkKSYmTyhkLnJlc291cmNlVXJsKX0sITApOiExfTtmdW5jdGlvbiBVKGEsYixjLGQpe3RoaXMuYj1hO3RoaXMubWV0aG9kPWI7dGhpcy52ZXJzaW9uPWM7dGhpcy5hPWR9ZnVuY3Rpb24gUWIoYSl7cmV0dXJuISFhJiZ2b2lkIDAhPT1hLm9taWRfbWVzc2FnZV9ndWlkJiZ2b2lkIDAhPT1hLm9taWRfbWVzc2FnZV9tZXRob2QmJnZvaWQgMCE9PWEub21pZF9tZXNzYWdlX3ZlcnNpb24mJidzdHJpbmcnPT09dHlwZW9mIGEub21pZF9tZXNzYWdlX2d1aWQmJidzdHJpbmcnPT09dHlwZW9mIGEub21pZF9tZXNzYWdlX21ldGhvZCYmJ3N0cmluZyc9PT10eXBlb2YgYS5vbWlkX21lc3NhZ2VfdmVyc2lvbiYmKHZvaWQgMD09PWEub21pZF9tZXNzYWdlX2FyZ3N8fHZvaWQgMCE9PWEub21pZF9tZXNzYWdlX2FyZ3MpfWZ1bmN0aW9uIFJiKGEpe3JldHVybiBuZXcgVShhLm9taWRfbWVzc2FnZV9ndWlkLGEub21pZF9tZXNzYWdlX21ldGhvZCxhLm9taWRfbWVzc2FnZV92ZXJzaW9uLGEub21pZF9tZXNzYWdlX2FyZ3MpfQpmdW5jdGlvbiBTYihhKXt2YXIgYj17fTtiPShiLm9taWRfbWVzc2FnZV9ndWlkPWEuYixiLm9taWRfbWVzc2FnZV9tZXRob2Q9YS5tZXRob2QsYi5vbWlkX21lc3NhZ2VfdmVyc2lvbj1hLnZlcnNpb24sYik7dm9pZCAwIT09YS5hJiYoYi5vbWlkX21lc3NhZ2VfYXJncz1hLmEpO3JldHVybiBifTtmdW5jdGlvbiBUYihhKXt0aGlzLmM9YX07ZnVuY3Rpb24gVihhKXt0aGlzLmM9YTt0aGlzLmhhbmRsZUV4cG9ydGVkTWVzc2FnZT1WLnByb3RvdHlwZS5mLmJpbmQodGhpcyl9cihWLFRiKTtWLnByb3RvdHlwZS5iPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDA9PT1iP3RoaXMuYzpiO2lmKCFiKXRocm93IEVycm9yKCdNZXNzYWdlIGRlc3RpbmF0aW9uIG11c3QgYmUgZGVmaW5lZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB3aGVuIHNlbmRpbmcgdGhlIG1lc3NhZ2UuJyk7Yi5oYW5kbGVFeHBvcnRlZE1lc3NhZ2UoU2IoYSksdGhpcyl9O1YucHJvdG90eXBlLmY9ZnVuY3Rpb24oYSxiKXtRYihhKSYmdGhpcy5hJiZ0aGlzLmEoUmIoYSksYil9O2Z1bmN0aW9uIFViKGEsYil7dGhpcy5jPWI9dm9pZCAwPT09Yj9JOmI7dmFyIGM9dGhpczthLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLGZ1bmN0aW9uKGQpe2lmKCdvYmplY3QnPT09dHlwZW9mIGQuZGF0YSl7dmFyIGU9ZC5kYXRhO1FiKGUpJiZkLnNvdXJjZSYmYy5hJiZjLmEoUmIoZSksZC5zb3VyY2UpfX0pfXIoVWIsVGIpO1ViLnByb3RvdHlwZS5iPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDA9PT1iP3RoaXMuYzpiO2lmKCFiKXRocm93IEVycm9yKCdNZXNzYWdlIGRlc3RpbmF0aW9uIG11c3QgYmUgZGVmaW5lZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB3aGVuIHNlbmRpbmcgdGhlIG1lc3NhZ2UuJyk7Yi5wb3N0TWVzc2FnZShTYihhKSwnKicpfTtmdW5jdGlvbiBWYigpe3JldHVybid4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZyxmdW5jdGlvbihhKXt2YXIgYj0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuJ3knPT09YT8oYiYzfDgpLnRvU3RyaW5nKDE2KTpiLnRvU3RyaW5nKDE2KX0pfTtmdW5jdGlvbiBXYihhKXtpZighYS5hfHwhYS5hLmRvY3VtZW50KXRocm93IEVycm9yKCdPTUlEIFNlcnZpY2UgU2NyaXB0IGlzIG5vdCBydW5uaW5nIHdpdGhpbiBhIHdpbmRvdy4nKTt2YXIgYj1hLmI7YS5iPVtdO2IuZm9yRWFjaChmdW5jdGlvbihjKXt0cnl7dmFyIGQ9YS5jLkM/J2xpbWl0ZWQnOidmdWxsJyxlPVAoYy5hY2Nlc3NNb2RlLHNhKT9jLmFjY2Vzc01vZGU6bnVsbDt2YXIgZz1lPydmdWxsJz09ZSYmJ2xpbWl0ZWQnPT1kP2Q6J2RvbWFpbic9PWU/J2xpbWl0ZWQnOmU6ZDtjLmFjY2Vzc01vZGU9ZzthOnt2YXIgbD1jLnJlc291cmNlVXJsLGY9YS5hLmxvY2F0aW9uLm9yaWdpbjt0cnl7dmFyIGg9bmV3IFVSTChsLGYpO2JyZWFrIGF9Y2F0Y2goRil7fXRyeXtoPW5ldyBVUkwobCk7YnJlYWsgYX1jYXRjaChGKXt9aD1udWxsfWlmKGQ9aCl7dmFyIGs9VmIoKSxtPWEuYS5kb2N1bWVudCx2PW0uY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7di5pZD0nb21pZC12ZXJpZmljYXRpb24tc2NyaXB0LWZyYW1lLScrCms7di5zdHlsZS5kaXNwbGF5PSdub25lJztbJ2Z1bGwnLCdsaW1pdGVkJ10uaW5jbHVkZXMoZyk/di5zcmNkb2M9IjxodG1sPjxoZWFkPlxuPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI+d2luZG93WydvbWlkVmVyaWZpY2F0aW9uUHJvcGVydGllcyddID0ge1xuJ3NlcnZpY2VXaW5kb3cnOiB3aW5kb3cucGFyZW50LFxuJ2luamVjdGlvblNvdXJjZSc6ICdhcHAnLFxuJ2luamVjdGlvbklkJzogJyIrKGsrJ1wnLFxufTtceDNjL3NjcmlwdD5cbjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9IicpK2QuaHJlZisnIj5ceDNjL3NjcmlwdD5cbjwvaGVhZD48Ym9keT48L2JvZHk+PC9odG1sPic6J2RvbWFpbic9PWcmJih2LnNyYz1YYihhLGssZCkuaHJlZik7Wydkb21haW4nLCdsaW1pdGVkJ10uaW5jbHVkZXMoZykmJih2LnNhbmRib3g9J2FsbG93LXNjcmlwdHMnKTttLmJvZHkuYXBwZW5kQ2hpbGQodik7dmFyIEI9Yy52ZW5kb3JLZXkseD1jLnZlcmlmaWNhdGlvblBhcmFtZXRlcnM7CkI9dm9pZCAwPT09Qj8nJzpCO3g9dm9pZCAwPT09eD8nJzp4O0ImJidzdHJpbmcnPT09dHlwZW9mIEImJicnIT09QiYmeCYmJ3N0cmluZyc9PT10eXBlb2YgeCYmJychPT14JiYoYS5mLmlbQl09eCk7YS5jLnYuc2V0KGssYyl9fWNhdGNoKEYpe1NhKCdPTUlEIHZlcmlmaWNhdGlvbiBzY3JpcHQgJytjLnJlc291cmNlVXJsKycgZmFpbGVkIHRvIGxvYWQ6ICcrRil9fSl9CmZ1bmN0aW9uIFhiKGEsYixjKXt2YXIgZD0nLy53ZWxsLWtub3duL29taWQvb21sb2FkZXItdjEuaHRtbCMnOyhuZXcgTWFwKFtbJ3ZlcmlmaWNhdGlvblNjcmlwdFVybCcsYy5ocmVmXSxbJ2luamVjdGlvbklkJyxiXV0pKS5mb3JFYWNoKGZ1bmN0aW9uKGUsZyl7ZCs9ZW5jb2RlVVJJQ29tcG9uZW50KGcpKyc9JytlbmNvZGVVUklDb21wb25lbnQoZSkrJyYnfSk7Yj1udWxsO3RyeXtiPW5ldyBVUkwoZCxhLmEucGFyZW50LmxvY2F0aW9uLm9yaWdpbil9Y2F0Y2goZSl7dGhyb3cgRXJyb3IoJ09NSUQgU2VydmljZSBTY3JpcHQgY2Fubm90IGFjY2VzcyB0aGUgcGFyZW50IHdpbmRvdy4nKTt9cmV0dXJuIGJ9O2Z1bmN0aW9uIFliKCl7dmFyIGE9WmIsYj0kYixjPXRoaXM7dGhpcy5jPVc7dGhpcy5iPWE7dGhpcy5hPUgoKTt0aGlzLmc9Yjt0aGlzLmY9ITE7dGhpcy5yZWdpc3RlclNlc3Npb25PYnNlcnZlcihmdW5jdGlvbihkKXtyZXR1cm4gYWMoYyxkKX0pfW49WWIucHJvdG90eXBlO24ucmVnaXN0ZXJTZXNzaW9uT2JzZXJ2ZXI9ZnVuY3Rpb24oYSl7YWIodGhpcy5jLGEpfTtuLnNldFNsb3RFbGVtZW50PWZ1bmN0aW9uKGEpe3RiKGEpPyh0aGlzLmEuZj1hLHRoaXMuYiYmdmIodGhpcy5iKSk6Signc2V0U2xvdEVsZW1lbnQgY2FsbGVkIHdpdGggYSBub24tSFRNTEVsZW1lbnQuICBJdCB3aWxsIGJlIGlnbm9yZWQuJyl9O24uc2V0RWxlbWVudEJvdW5kcz1mdW5jdGlvbihhKXt0aGlzLmEuaj1hO3RoaXMuYiYmdmIodGhpcy5iKTt0aGlzLmImJndiKHRoaXMuYil9O24uZXJyb3I9ZnVuY3Rpb24oYSxiKXtkYih0aGlzLmMsYSxiKX07Cm4ucmVnaXN0ZXJBZEV2ZW50cz1mdW5jdGlvbigpe29iKHRoaXMuYywnamF2YXNjcmlwdCcpfTtuLnJlZ2lzdGVyTWVkaWFFdmVudHM9ZnVuY3Rpb24oKXtuYih0aGlzLmMsJ2phdmFzY3JpcHQnKX07ZnVuY3Rpb24gWShhLGIsYyl7J2ltcHJlc3Npb24nPT1iP3BiKGEuYywnamF2YXNjcmlwdCcpJiYoamIoYS5jLCdqYXZhc2NyaXB0JyksYS5iJiZSKGEuYikpOignbG9hZGVkJz09Yj8oYz12b2lkIDA9PT1jP251bGw6YyxNKGEuYywnamF2YXNjcmlwdCcpJiZrYihhLmMsJ2phdmFzY3JpcHQnLGMpKTpNKGEuYywnamF2YXNjcmlwdCcpJiZsYihhLmMsYiwnamF2YXNjcmlwdCcsYyksWydsb2FkZWQnLCdzdGFydCddLmluY2x1ZGVzKGIpJiZhLmImJlIoYS5iKSl9bi5pbmplY3RWZXJpZmljYXRpb25TY3JpcHRSZXNvdXJjZXM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nO2IuYi5wdXNoLmFwcGx5KGIuYixxKGEpKTtpZih0aGlzLmYpdHJ5e1diKHRoaXMuZyl9Y2F0Y2goYyl7SihjLm1lc3NhZ2UpfX07Cm4uc2V0Q3JlYXRpdmVUeXBlPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDA9PT1iP251bGw6YjtpZighdGhpcy5hLmJ8fHRoaXMuYS5hKXRoaXMuYS5hPWEsJ3ZpZGVvJz09YXx8J2F1ZGlvJz09YT90aGlzLmEuYj0ndmlkZW8nOidodG1sRGlzcGxheSc9PWF8fCduYXRpdmVEaXNwbGF5Jz09YT90aGlzLmEuYj0nZGlzcGxheSc6J2RlZmluZWRCeUphdmFTY3JpcHQnPT1hJiZiJiYodGhpcy5hLmI9J25vbmUnPT1iPydkaXNwbGF5JzondmlkZW8nKX07bi5zZXRJbXByZXNzaW9uVHlwZT1mdW5jdGlvbihhKXtpZighdGhpcy5hLmJ8fHRoaXMuYS5hKXRoaXMuYS5oPWF9OwpmdW5jdGlvbiBhYyhhLGIpe2lmKCdzZXNzaW9uU3RhcnQnPT09Yi50eXBlKXthLmY9ITA7dHJ5e1diKGEuZyl9Y2F0Y2goYyl7SihjLm1lc3NhZ2UpfX0nc2Vzc2lvbkZpbmlzaCc9PT1iLnR5cGUmJihhLmY9ITEsKGI9SCgpLmMpJiYnbmF0aXZlJz09Yi5hZFNlc3Npb25UeXBlfHxhLnJlZ2lzdGVyU2Vzc2lvbk9ic2VydmVyKGZ1bmN0aW9uKGMpe3JldHVybiBhYyhhLGMpfSkpfW4uc2V0Q2xpZW50SW5mbz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5hLmN8fHt9O2Qub21pZEpzSW5mbz1PYmplY3QuYXNzaWduKHt9LGQub21pZEpzSW5mbyx7c2Vzc2lvbkNsaWVudFZlcnNpb246YSxwYXJ0bmVyTmFtZTpiLHBhcnRuZXJWZXJzaW9uOmN9KTt0aGlzLmEuYz1kO3JldHVybiB0aGlzLmEuYy5vbWlkSnNJbmZvLnNlcnZpY2VWZXJzaW9ufTtmdW5jdGlvbiBiYyhhKXtyZXR1cm4vXGQrXC5cZCtcLlxkKygtLiopPy8udGVzdChhKX1mdW5jdGlvbiBjYyhhKXthPWEuc3BsaXQoJy0nKVswXS5zcGxpdCgnLicpO2Zvcih2YXIgYj1bJzEnLCcwJywnMyddLGM9MDszPmM7YysrKXt2YXIgZD1wYXJzZUludChhW2NdLDEwKSxlPXBhcnNlSW50KGJbY10sMTApO2lmKGQ+ZSlicmVhaztlbHNlIGlmKGQ8ZSlyZXR1cm4hMX1yZXR1cm4hMH07ZnVuY3Rpb24gZGMoYSxiKXtyZXR1cm4gYmMoYSkmJmNjKGEpP2I/YjpbXTpiJiYnc3RyaW5nJz09PXR5cGVvZiBiP0pTT04ucGFyc2UoYik6W119O2Z1bmN0aW9uIGVjKCl7dmFyIGE9ZmM7dmFyIGI9dm9pZCAwPT09Yj9vbWlkR2xvYmFsOmI7dGhpcy5hPWE7dGhpcy5mPWI7dGhpcy5iPW5ldyBWO3RoaXMuZi5vbWlkPXRoaXMuZi5vbWlkfHx7fTt0aGlzLmYub21pZC52MV9TZXNzaW9uU2VydmljZUNvbW11bmljYXRpb249dGhpcy5iO3RoaXMuYz1iJiZiLmFkZEV2ZW50TGlzdGVuZXImJmIucG9zdE1lc3NhZ2U/bmV3IFViKGIpOm51bGw7dGhpcy5nPW51bGw7dGhpcy5iLmE9dGhpcy5oLmJpbmQodGhpcyk7dGhpcy5jJiYodGhpcy5jLmE9dGhpcy5pLmJpbmQodGhpcykpfWVjLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEsYil7Z2ModGhpcyxhLGIsdGhpcy5iKX07CmVjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEsYil7dGhpcy5nfHwodGhpcy5nPWIpO3RoaXMuZyE9Yj9KKCdUaGUgc291cmNlIHdpbmRvdyBvZiBzZXNzaW9uIGNsaWVudCBwb3N0IG1lc3NhZ2VzIGNhbm5vdCBiZSBjaGFuZ2VkIGZyb20gdGhlIHNvdXJjZSBvZiB0aGUgZmlyc3QgbWVzc2FnZS4nKTpnYyh0aGlzLGEsYix0aGlzLmMpfTsKZnVuY3Rpb24gZ2MoYSxiLGMsZCl7ZnVuY3Rpb24gZShoKXtmb3IodmFyIGs9W10sbT0wO208YXJndW1lbnRzLmxlbmd0aDsrK20pa1ttXT1hcmd1bWVudHNbbV07az1uZXcgVShnLCdyZXNwb25zZScsZixiYyhmKSYmY2MoZik/azpKU09OLnN0cmluZ2lmeShrKSk7ZC5iKGssYyl9dmFyIGc9Yi5iLGw9Yi5tZXRob2QsZj1iLnZlcnNpb247Yj1kYyhmLGIuYSk7dHJ5e2hjKGEsbCxlLGIpfWNhdGNoKGgpe2QuYihuZXcgVShnLCdlcnJvcicsZiwnXG4gICAgICAgIG5hbWU6ICcraC5uYW1lKydcbiAgICAgICAgbWVzc2FnZTogJytoLm1lc3NhZ2UrJ1xuICAgICAgICBmaWxlbmFtZTogJytoLmZpbGVuYW1lKydcbiAgICAgICAgbGluZU51bWJlcjogJytoLmxpbmVOdW1iZXIrJ1xuICAgICAgICBjb2x1bW5OdW1iZXI6ICcraC5jb2x1bW5OdW1iZXIrJ1xuICAgICAgICBzdGFjazogJytoLnN0YWNrKydcbiAgICAgICAgdG9TdHJpbmcoKTogJytoLnRvU3RyaW5nKCkpLGMpfX0KZnVuY3Rpb24gaGMoYSxiLGMsZCl7c3dpdGNoKGIpe2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLnJlZ2lzdGVyQWRFdmVudHMnOmEuYS5yZWdpc3RlckFkRXZlbnRzKCk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UucmVnaXN0ZXJNZWRpYUV2ZW50cyc6YS5hLnJlZ2lzdGVyTWVkaWFFdmVudHMoKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5yZWdpc3RlclNlc3Npb25PYnNlcnZlcic6YS5hLnJlZ2lzdGVyU2Vzc2lvbk9ic2VydmVyKGMpO2JyZWFrO2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLnNldFNsb3RFbGVtZW50JzpjPXAoZCkubmV4dCgpLnZhbHVlO2EuYS5zZXRTbG90RWxlbWVudChjKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5zZXRWaWRlb0VsZW1lbnQnOmM9cChkKS5uZXh0KCkudmFsdWU7YT1hLmE7dWIoYyk/KGEuYS5nPWMsYS5iJiZ2YihhLmIpKTpKKCdzZXRWaWRlb0VsZW1lbnQgY2FsbGVkIHdpdGggYSBub24tSFRNTFZpZGVvRWxlbWVudC4gSXQgd2lsbCBiZSBpZ25vcmVkLicpOwpicmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5zZXRFbGVtZW50Qm91bmRzJzpjPXAoZCkubmV4dCgpLnZhbHVlO2EuYS5zZXRFbGVtZW50Qm91bmRzKGMpO2JyZWFrO2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLnN0YXJ0U2Vzc2lvbic6SignU2Vzc2lvbiBzdGFydCBmcm9tIEpTIGlzIG5vdCBzdXBwb3J0ZWQgaW4gbW9iaWxlIGFwcC4nKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5maW5pc2hTZXNzaW9uJzpKKCdTZXNzaW9uIGZpbmlzaCBmcm9tIEpTIGlzIG5vdCBzdXBwb3J0ZWQgaW4gbW9iaWxlIGFwcC4nKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5pbXByZXNzaW9uT2NjdXJyZWQnOlkoYS5hLCdpbXByZXNzaW9uJyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UubG9hZGVkJzooYz1wKGQpLm5leHQoKS52YWx1ZSk/KGI9e3NraXBwYWJsZTpjLmlzU2tpcHBhYmxlLGF1dG9QbGF5OmMuaXNBdXRvUGxheSxwb3NpdGlvbjpjLnBvc2l0aW9ufSxjLmlzU2tpcHBhYmxlJiYKKGIuc2tpcE9mZnNldD1jLnNraXBPZmZzZXQpLFkoYS5hLCdsb2FkZWQnLGIpKTpZKGEuYSwnbG9hZGVkJyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2Uuc3RhcnQnOmI9cChkKTtjPWIubmV4dCgpLnZhbHVlO2I9Yi5uZXh0KCkudmFsdWU7WShhLmEsJ3N0YXJ0Jyx7ZHVyYXRpb246YyxtZWRpYVBsYXllclZvbHVtZTpifSk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UuZmlyc3RRdWFydGlsZSc6WShhLmEsJ2ZpcnN0UXVhcnRpbGUnKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5taWRwb2ludCc6WShhLmEsJ21pZHBvaW50Jyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UudGhpcmRRdWFydGlsZSc6WShhLmEsJ3RoaXJkUXVhcnRpbGUnKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5jb21wbGV0ZSc6WShhLmEsJ2NvbXBsZXRlJyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UucGF1c2UnOlkoYS5hLCdwYXVzZScpO2JyZWFrO2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLnJlc3VtZSc6WShhLmEsCidyZXN1bWUnKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5idWZmZXJTdGFydCc6WShhLmEsJ2J1ZmZlclN0YXJ0Jyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UuYnVmZmVyRmluaXNoJzpZKGEuYSwnYnVmZmVyRmluaXNoJyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2Uuc2tpcHBlZCc6WShhLmEsJ3NraXBwZWQnKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS52b2x1bWVDaGFuZ2UnOmM9e21lZGlhUGxheWVyVm9sdW1lOnAoZCkubmV4dCgpLnZhbHVlfTtZKGEuYSwndm9sdW1lQ2hhbmdlJyxjKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5wbGF5ZXJTdGF0ZUNoYW5nZSc6Yz17c3RhdGU6cChkKS5uZXh0KCkudmFsdWV9O1koYS5hLCdwbGF5ZXJTdGF0ZUNoYW5nZScsYyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2UuYWRVc2VySW50ZXJhY3Rpb24nOmM9e2ludGVyYWN0aW9uVHlwZTpwKGQpLm5leHQoKS52YWx1ZX07WShhLmEsJ2FkVXNlckludGVyYWN0aW9uJywKYyk7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2Uuc2V0Q2xpZW50SW5mbyc6dmFyIGU9cChkKTtiPWUubmV4dCgpLnZhbHVlO2Q9ZS5uZXh0KCkudmFsdWU7ZT1lLm5leHQoKS52YWx1ZTthPWEuYS5zZXRDbGllbnRJbmZvKGIsZCxlKTtjKGEpO2JyZWFrO2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLmluamVjdFZlcmlmaWNhdGlvblNjcmlwdFJlc291cmNlcyc6Yz1wKGQpLm5leHQoKS52YWx1ZTthLmEuaW5qZWN0VmVyaWZpY2F0aW9uU2NyaXB0UmVzb3VyY2VzKGMpO2JyZWFrO2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLnNldENyZWF0aXZlVHlwZSc6Yz1wKGQpLm5leHQoKS52YWx1ZTthLmEuc2V0Q3JlYXRpdmVUeXBlKGMpO2JyZWFrO2Nhc2UgJ1Nlc3Npb25TZXJ2aWNlLnNldEltcHJlc3Npb25UeXBlJzpjPXAoZCkubmV4dCgpLnZhbHVlO2EuYS5zZXRJbXByZXNzaW9uVHlwZShjKTticmVhaztjYXNlICdTZXNzaW9uU2VydmljZS5zZXRDb250ZW50VXJsJzpjPXAoZCkubmV4dCgpLnZhbHVlOwphLmEuYS5vPWM7YnJlYWs7Y2FzZSAnU2Vzc2lvblNlcnZpY2Uuc2Vzc2lvbkVycm9yJzpiPXAoZCksYz1iLm5leHQoKS52YWx1ZSxiPWIubmV4dCgpLnZhbHVlLGEuYS5lcnJvcihjLGIpfX07ZnVuY3Rpb24gWigpe3ZhciBhPVcsYj1pYyxjPWpjLGQ9WmI7dGhpcy5mPWZjO3RoaXMuYT1hO3RoaXMuYz1iO3RoaXMuaD1jO3RoaXMuZz1kO3RoaXMuYj1IKCl9bj1aLnByb3RvdHlwZTsKbi5UPWZ1bmN0aW9uKGEpe2lmKCEoIShhJiZOKGEpJiZQKGEuaW1wcmVzc2lvbk93bmVyLHJhKSl8fCd2aWRlb0V2ZW50c093bmVyJ2luIGEmJm51bGwhPWEudmlkZW9FdmVudHNPd25lciYmIVAoYS52aWRlb0V2ZW50c093bmVyLHJhKXx8J21lZGlhRXZlbnRzT3duZXInaW4gYSYmbnVsbCE9YS5tZWRpYUV2ZW50c093bmVyJiYhUChhLm1lZGlhRXZlbnRzT3duZXIscmEpKSl7aWYoYS5jcmVhdGl2ZVR5cGUmJmEuaW1wcmVzc2lvblR5cGUpe3ZhciBiPWEubWVkaWFFdmVudHNPd25lcjtudWxsPT10aGlzLmIuYSYmdGhpcy5mLnNldENyZWF0aXZlVHlwZShhLmNyZWF0aXZlVHlwZSxiKTtudWxsPT10aGlzLmIuaCYmKHRoaXMuYi5oPWEuaW1wcmVzc2lvblR5cGUpO25iKHRoaXMuYSxiKX1lbHNlIGI9YS52aWRlb0V2ZW50c093bmVyLHRoaXMuYi5iPW51bGw9PWJ8fCdub25lJz09PWI/J2Rpc3BsYXknOid2aWRlbycsdGhpcy5iLmE9bnVsbCx0aGlzLmIuaD1udWxsLG5iKHRoaXMuYSxiKTsKb2IodGhpcy5hLGEuaW1wcmVzc2lvbk93bmVyKTthJiZudWxsIT1hLmlzb2xhdGVWZXJpZmljYXRpb25TY3JpcHRzJiYnYm9vbGVhbic9PT10eXBlb2YgYS5pc29sYXRlVmVyaWZpY2F0aW9uU2NyaXB0cyYmKHRoaXMuYi5DPWEuaXNvbGF0ZVZlcmlmaWNhdGlvblNjcmlwdHMpfX07Cm4uVz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtpZihOKGIpKXtpZihlPVAoYi5lbnZpcm9ubWVudCx1YSkmJlAoYi5hZFNlc3Npb25UeXBlLHFhKSllPWIub21pZE5hdGl2ZUluZm8sZT1OKGUpP08oZS5wYXJ0bmVyTmFtZSkmJk8oZS5wYXJ0bmVyVmVyc2lvbik6ITE7ZSYmKGU9Yi5hcHAsZT1OKGUpP08oZS5saWJyYXJ5VmVyc2lvbikmJk8oZS5hcHBJZCk6ITEpfWVsc2UgZT0hMTtlJiYoUGIoZCkmJih0aGlzLmIudj1uZXcgTWFwKE9iamVjdC5lbnRyaWVzKGQpKSksZD10aGlzLmYsYz12b2lkIDA9PT1jP251bGw6YyxudWxsPT1hJiYoYT1WYigpKSxiLmNhbk1lYXN1cmVWaXNpYmlsaXR5PWQuYi5DKCksZC5hLmFkU2Vzc2lvbklkPWEsYT1kLmEsZT1iLHZvaWQgMCE9PWUuY29udGVudFVybCYmKGEubz1lLmNvbnRlbnRVcmwsZS5jb250ZW50VXJsPXZvaWQgMCksZT1hLmN8fHt9LGIub21pZEpzSW5mbz1PYmplY3QuYXNzaWduKHt9LGUub21pZEpzSW5mb3x8e30sYi5vbWlkSnNJbmZvfHwKe30pLGU9Yj1PYmplY3QuYXNzaWduKHt9LGUsYiksYS5DfHwobnVsbCE9YS5nPyhlLnZpZGVvRWxlbWVudD1hLmcsZS5hY2Nlc3NNb2RlPSdmdWxsJyk6bnVsbCE9YS5mJiYoZS5zbG90RWxlbWVudD1hLmYsZS5hY2Nlc3NNb2RlPSdmdWxsJykpLGEuYz1iLGViKGQuYyxjKSxkLmImJlIoZC5iKSl9O24uVT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZjtpYihhLmMpO2EuYi5tKCl9O24uJD1mdW5jdGlvbihhKXtOKGEpJiZyYihhLngpJiZyYihhLnkpJiZyYihhLndpZHRoKSYmcmIoYS5oZWlnaHQpJiYodGhpcy5iLkc9YSxxYih0aGlzLmMsJ2NvbnRhaW5lcicpKX07bi5hYT1mdW5jdGlvbihhKXtQKGEsdGEpJiYodGhpcy5iLm09YSwnYmFja2dyb3VuZGVkJz09PWE/cWIodGhpcy5jLCdjb250YWluZXInLCdiYWNrZ3JvdW5kZWQnKTpxYih0aGlzLmMsJ2NvbnRhaW5lcicpKX07bi5YPWZ1bmN0aW9uKGEpeydpbXByZXNzaW9uJz09PWEmJih0aGlzLk0oKSx0aGlzLmcmJlIodGhpcy5nKSl9OwpuLk09ZnVuY3Rpb24oKXtwYih0aGlzLmEsJ25hdGl2ZScpJiZqYih0aGlzLmEsJ25hdGl2ZScpfTtuLlY9ZnVuY3Rpb24oYSl7YT12b2lkIDA9PT1hP251bGw6YTtNKHRoaXMuYSwnbmF0aXZlJykmJmtiKHRoaXMuYSwnbmF0aXZlJyxhKX07bi5lcnJvcj1mdW5jdGlvbihhLGIpe1AoYSxvYSkmJmRiKHRoaXMuYSxhLGIpfTtuLlk9ZnVuY3Rpb24oYSxiKXt0aGlzLk4oYSxiKX07bi5OPWZ1bmN0aW9uKGEsYil7TSh0aGlzLmEsJ25hdGl2ZScpJiZQKGEseikmJih2b2lkIDA9PT1ifHxOKGIpKSYmKCdsb2FkZWQnPT1hP2tiKHRoaXMuYSwnbmF0aXZlJyxiKTpsYih0aGlzLmEsYSwnbmF0aXZlJyxiKSl9OwpuLlo9ZnVuY3Rpb24oYSl7aWYoJ25vbmUnIT09dGhpcy5hLmEuaSYmJ251bWJlcic9PT10eXBlb2YgYSYmIWlzTmFOKGEpKXt0aGlzLmIudT1hO2E9dGhpcy5oO3ZhciBiPWEuYS5CO251bGwhPWImJmxiKGEuYiwndm9sdW1lQ2hhbmdlJywnbmF0aXZlJyx7bWVkaWFQbGF5ZXJWb2x1bWU6YixkZXZpY2VWb2x1bWU6YS5hLnV9KX19O1oucHJvdG90eXBlLnN0YXJ0U2Vzc2lvbj1aLnByb3RvdHlwZS5XO1oucHJvdG90eXBlLmVycm9yPVoucHJvdG90eXBlLmVycm9yO1oucHJvdG90eXBlLmZpbmlzaFNlc3Npb249Wi5wcm90b3R5cGUuVTtaLnByb3RvdHlwZS5wdWJsaXNoQWRFdmVudD1aLnByb3RvdHlwZS5YO1oucHJvdG90eXBlLnB1Ymxpc2hJbXByZXNzaW9uRXZlbnQ9Wi5wcm90b3R5cGUuTTtaLnByb3RvdHlwZS5wdWJsaXNoVmlkZW9FdmVudD1aLnByb3RvdHlwZS5ZO1oucHJvdG90eXBlLnB1Ymxpc2hNZWRpYUV2ZW50PVoucHJvdG90eXBlLk47CloucHJvdG90eXBlLnB1Ymxpc2hMb2FkZWRFdmVudD1aLnByb3RvdHlwZS5WO1oucHJvdG90eXBlLnNldE5hdGl2ZVZpZXdIaWVyYXJjaHk9Wi5wcm90b3R5cGUuJDtaLnByb3RvdHlwZS5zZXRTdGF0ZT1aLnByb3RvdHlwZS5hYTtaLnByb3RvdHlwZS5zZXREZXZpY2VWb2x1bWU9Wi5wcm90b3R5cGUuWjtaLnByb3RvdHlwZS5pbml0PVoucHJvdG90eXBlLlQ7ZnVuY3Rpb24ga2MoKXt2YXIgYT1XLGI9bGM7dmFyIGM9dm9pZCAwPT09Yz9JOmM7dGhpcy5nPWE7dGhpcy5hPWI7dGhpcy5oPXt9O3RoaXMuZj17fTt0aGlzLmM9bmV3IFY7Yy5vbWlkPWMub21pZHx8e307Yy5vbWlkLnYxX1ZlcmlmaWNhdGlvblNlcnZpY2VDb21tdW5pY2F0aW9uPXRoaXMuYzt0aGlzLmI9bnVsbDtjJiZjLmFkZEV2ZW50TGlzdGVuZXImJmMucG9zdE1lc3NhZ2UmJih0aGlzLmI9bmV3IFViKGMpKTt0aGlzLmMuYT10aGlzLmkuYmluZCh0aGlzKTt0aGlzLmImJih0aGlzLmIuYT10aGlzLmouYmluZCh0aGlzKSl9ZnVuY3Rpb24gbWMoYSxiLGMsZCl7RWIoYS5hLGIsYyxkKX1mdW5jdGlvbiBuYyhhLGIsYyxkKXtEYihhLmEsJ2Rvd25sb2FkSmF2YVNjcmlwdFJlc291cmNlJykoYixjLGQpfWtjLnByb3RvdHlwZS5qPWZ1bmN0aW9uKGEsYil7dGhpcy5iJiZvYyh0aGlzLGEsYix0aGlzLmIpfTtrYy5wcm90b3R5cGUuaT1mdW5jdGlvbihhLGIpe29jKHRoaXMsYSxiLHRoaXMuYyl9OwpmdW5jdGlvbiBvYyhhLGIsYyxkKXtmdW5jdGlvbiBlKEUpe2Zvcih2YXIgWD1bXSxwYT0wO3BhPGFyZ3VtZW50cy5sZW5ndGg7KytwYSlYW3BhXT1hcmd1bWVudHNbcGFdO1g9bmV3IFUoZywncmVzcG9uc2UnLGYsYmMoZikmJmNjKGYpP1g6SlNPTi5zdHJpbmdpZnkoWCkpO2QuYihYLGMpfXZhciBnPWIuYixsPWIubWV0aG9kLGY9Yi52ZXJzaW9uO2I9ZGMoZixiLmEpO3RyeXtzd2l0Y2gobCl7Y2FzZSAnVmVyaWZpY2F0aW9uU2VydmljZS5hZGRFdmVudExpc3RlbmVyJzp2YXIgaD1wKGIpLm5leHQoKS52YWx1ZTtaYShhLmcsaCxlKTticmVhaztjYXNlICdWZXJpZmljYXRpb25TZXJ2aWNlLmFkZFNlc3Npb25MaXN0ZW5lcic6dmFyIGs9cChiKSxtPWsubmV4dCgpLnZhbHVlLHY9ay5uZXh0KCkudmFsdWU7YWIoYS5nLGUsbSx2KTticmVhaztjYXNlICdWZXJpZmljYXRpb25TZXJ2aWNlLnNlbmRVcmwnOnZhciBCPXAoYikubmV4dCgpLnZhbHVlO21jKGEsQixmdW5jdGlvbigpe3JldHVybiBlKCEwKX0sCmZ1bmN0aW9uKCl7cmV0dXJuIGUoITEpfSk7YnJlYWs7Y2FzZSAnVmVyaWZpY2F0aW9uU2VydmljZS5zZXRUaW1lb3V0Jzp2YXIgeD1wKGIpLEY9eC5uZXh0KCkudmFsdWUsSz14Lm5leHQoKS52YWx1ZTthLmhbRl09QWIoYS5hLCdzZXRUaW1lb3V0JykoZSxLKTticmVhaztjYXNlICdWZXJpZmljYXRpb25TZXJ2aWNlLmNsZWFyVGltZW91dCc6dmFyIHRjPXAoYikubmV4dCgpLnZhbHVlO0NiKGEuYSxhLmhbdGNdKTticmVhaztjYXNlICdWZXJpZmljYXRpb25TZXJ2aWNlLnNldEludGVydmFsJzp2YXIgTmI9cChiKSx1Yz1OYi5uZXh0KCkudmFsdWUsdmM9TmIubmV4dCgpLnZhbHVlO2EuZlt1Y109emIoYS5hLGUsdmMpO2JyZWFrO2Nhc2UgJ1ZlcmlmaWNhdGlvblNlcnZpY2UuY2xlYXJJbnRlcnZhbCc6dmFyIHdjPXAoYikubmV4dCgpLnZhbHVlO0JiKGEuYSxhLmZbd2NdKTticmVhaztjYXNlICdWZXJpZmljYXRpb25TZXJ2aWNlLmluamVjdEphdmFTY3JpcHRSZXNvdXJjZSc6dmFyIHhjPQpwKGIpLm5leHQoKS52YWx1ZTtuYyhhLHhjLGZ1bmN0aW9uKEUpe3JldHVybiBlKCEwLEUpfSxmdW5jdGlvbigpe3JldHVybiBlKCExKX0pO2JyZWFrO2Nhc2UgJ1ZlcmlmaWNhdGlvblNlcnZpY2UuZ2V0VmVyc2lvbic6cChiKS5uZXh0KCk7dmFyIHljPUgoKS5jLm9taWRKc0luZm87ZSh5Yy5zZXJ2aWNlVmVyc2lvbil9fWNhdGNoKEUpe2QuYihuZXcgVShnLCdlcnJvcicsZiwnXG4gICAgICAgICAgICAgIG5hbWU6ICcrRS5uYW1lKydcbiAgICAgICAgICAgICAgbWVzc2FnZTogJytFLm1lc3NhZ2UrJ1xuICAgICAgICAgICAgICBmaWxlbmFtZTogJytFLmZpbGVuYW1lKydcbiAgICAgICAgICAgICAgbGluZU51bWJlcjogJytFLmxpbmVOdW1iZXIrJ1xuICAgICAgICAgICAgICBjb2x1bW5OdW1iZXI6ICcrRS5jb2x1bW5OdW1iZXIrJ1xuICAgICAgICAgICAgICBzdGFjazogJytFLnN0YWNrKydcbiAgICAgICAgICAgICAgdG9TdHJpbmcoKTogJytFLnRvU3RyaW5nKCkrJ1xuICAgICAgICAgICcpLApjKX19O2Z1bmN0aW9uIHBjKCl7dmFyIGE9SS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTthLmlkPSdvbWlkX3YxX3ByZXNlbnQnO2EubmFtZT0nb21pZF92MV9wcmVzZW50JzthLnN0eWxlLmRpc3BsYXk9J25vbmUnO0kuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiBxYygpe3ZhciBhPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGIpe2IuZm9yRWFjaChmdW5jdGlvbihjKXsnQk9EWSc9PT1jLmFkZGVkTm9kZXNbMF0ubm9kZU5hbWUmJihwYygpLGEuZGlzY29ubmVjdCgpKX0pfSk7YS5vYnNlcnZlKEkuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHtjaGlsZExpc3Q6ITB9KX07dmFyIFc9bmV3IFRhLGxjPW5ldyBmdW5jdGlvbigpe3ZhciBhO3RoaXMuYT1hPXZvaWQgMD09PWE/b21pZEdsb2JhbDphfTtuZXcga2M7dmFyIHJjPW5ldyBmdW5jdGlvbigpe30sc2M9bmV3IGZ1bmN0aW9uKCl7fSxpYz1uZXcgZnVuY3Rpb24oKXt0aGlzLmI9Vzt0aGlzLmM9c2M7dGhpcy5hPUgoKX0semM7ST96Yz1JLkludGVyc2VjdGlvbk9ic2VydmVyJiYoSS5NdXRhdGlvbk9ic2VydmVyfHxJLlJlc2l6ZU9ic2VydmVyKT9uZXcgVChJLHJjLGljLFcpOm5ldyBTKEksc2MsaWMsbGMsVyk6emM9bnVsbDt2YXIgWmI9emMsJGI9bmV3IGZ1bmN0aW9uKCl7dmFyIGE9Vzt2YXIgYj12b2lkIDA9PT1iP0k6Yjt0aGlzLmY9YTt0aGlzLmE9Yjt0aGlzLmM9SCgpO3RoaXMuYj1bXX0sZmM9bmV3IFliLGpjPW5ldyBmdW5jdGlvbigpe3ZhciBhPVcsYj1IKCk7dGhpcy5iPWE7dGhpcy5hPWJ9O0kub21pZEJyaWRnZT1uZXcgWjtuZXcgZWM7CmlmKEkuZnJhbWVzJiZJLmRvY3VtZW50JiYhKCdvbWlkX3YxX3ByZXNlbnQnaW4gSS5mcmFtZXMpKXt2YXIgQWM7aWYoQWM9bnVsbD09SS5kb2N1bWVudC5ib2R5KUFjPSdNdXRhdGlvbk9ic2VydmVyJ2luIEk7QWM/cWMoKTpJLmRvY3VtZW50LmJvZHk/cGMoKTpJLmRvY3VtZW50LndyaXRlKCc8aWZyYW1lIHN0eWxlPSJkaXNwbGF5Om5vbmUiIGlkPSJvbWlkX3YxX3ByZXNlbnQiIG5hbWU9Im9taWRfdjFfcHJlc2VudCI+PC9pZnJhbWU+Jyl9Owp9KS5jYWxsKHRoaXMsIHRoaXMpOwo="

    .line 90
    invoke-static {v5, v7}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    move-result-object v5

    .line 91
    new-instance v6, Ljava/lang/String;

    invoke-direct {v6, v5}, Ljava/lang/String;-><init>([B)V

    .line 92
    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5, v3}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v5, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    const-string v6, "dmFyIGVsZW1lbnRUb1NjYWxlRm91bmQgPSBmYWxzZTsKICAgICAgICB2YXIgZWxlbWVudFRvU2NhbGUgPSBudWxsOwoKICAgICAgICBjb25zdCBjcmVhdGl2ZVJlc2l6ZSA9IGZ1bmN0aW9uIChwYXJlbnRfd2lkdGgsIHBhcmVudF9oZWlnaHQsIGVsZW1lbnQpIHsKICAgICAgICAgICAgbGV0IGNoaWxkX2RpdiA9IGVsZW1lbnQ7CgogICAgICAgICAgICBsZXQgY2hpbGRfaGVpZ2h0ID0gcGFyZW50X2hlaWdodDsKICAgICAgICAgICAgbGV0IGNoaWxkX3dpZHRoID0gcGFyZW50X3dpZHRoOwoKICAgICAgICAgICAgLy8gRFNQcyBjb3VsZCBiZSBhdHRhY2hpbmcgYmVhY29ucyhpbWcgMVgxKSBpbiBjaGlsZCBkaXYsIGRvIG5vdCBjb25zaWRlciBpdCBhcyBjcmVhdGl2ZSBmb3IgcmVzaXplCiAgICAgICAgICAgIGlmIChjaGlsZF9kaXYub2Zmc2V0SGVpZ2h0ID4gMSAmJiBjaGlsZF9kaXYub2Zmc2V0V2lkdGggPiAxKSB7CiAgICAgICAgICAgICAgICBjaGlsZF9oZWlnaHQgPSBjaGlsZF9kaXYub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgICAgY2hpbGRfd2lkdGggPSBjaGlsZF9kaXYub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBhc3BlY3Rfd2lkdGggPSBjaGlsZF93aWR0aDsKICAgICAgICAgICAgbGV0IGFzcGVjdF9oZWlnaHQgPSBjaGlsZF9oZWlnaHQ7CiAgICAgICAgICAgIGlmIChjaGlsZF9oZWlnaHQgPCBwYXJlbnRfaGVpZ2h0IHx8IGNoaWxkX3dpZHRoIDwgcGFyZW50X3dpZHRoKSB7CiAgICAgICAgICAgICAgICBsZXQgcGFyZW50X2FzcGVjdCA9IHBhcmVudF93aWR0aCAvIHBhcmVudF9oZWlnaHQ7CiAgICAgICAgICAgICAgICBsZXQgY2hpbGRfYXNwZWN0ID0gY2hpbGRfd2lkdGggLyBjaGlsZF9oZWlnaHQ7CiAgICAgICAgICAgICAgICBsZXQgc2NhbGVfZmFjdG9yID0gMTsKICAgICAgICAgICAgICAgIGxldCBzY2FsZV9mYWN0b3JfeSA9IDE7CgogICAgICAgICAgICAgICAgaWYgKHBhcmVudF9hc3BlY3QgPiBjaGlsZF9hc3BlY3QpIHsKICAgICAgICAgICAgICAgICAgICBzY2FsZV9mYWN0b3IgPSAocGFyZW50X2hlaWdodCAvIGNoaWxkX2hlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgYXNwZWN0X3dpZHRoID0gY2hpbGRfd2lkdGggKiBzY2FsZV9mYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgYXNwZWN0X2hlaWdodCA9IHBhcmVudF9oZWlnaHQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNjYWxlX2ZhY3RvciA9IChwYXJlbnRfd2lkdGggLyBjaGlsZF93aWR0aCk7CiAgICAgICAgICAgICAgICAgICAgc2NhbGVfZmFjdG9yX3kgPSAocGFyZW50X2hlaWdodCAvIGNoaWxkX2hlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgYXNwZWN0X3dpZHRoID0gcGFyZW50X3dpZHRoOwogICAgICAgICAgICAgICAgICAgIGFzcGVjdF9oZWlnaHQgPSBjaGlsZF9oZWlnaHQgKiAoc2NhbGVfZmFjdG9yKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYXNwZWN0X3dpZHRoIDwgcGFyZW50X3dpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGRfZGl2LnN0eWxlLm1hcmdpbkxlZnQgPSAocGFyZW50X3dpZHRoIC0gYXNwZWN0X3dpZHRoKSAvIDIgKyAicHgiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChhc3BlY3RfaGVpZ2h0IDwgcGFyZW50X2hlaWdodCkgewogICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc2xhdGlvblBpeGVscyA9IChwYXJlbnRfaGVpZ2h0IC0gY2hpbGRfaGVpZ2h0KSAvIDIgKyAicHgiOwogICAgICAgICAgICAgICAgICAgIGNoaWxkX2Rpdi5zdHlsZS50cmFuc2Zvcm0gKz0gInRyYW5zbGF0ZSgwcHgsIiArIHRyYW5zbGF0aW9uUGl4ZWxzICsgIikiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNoaWxkX2Rpdi5zdHlsZS50cmFuc2Zvcm0gKz0gInNjYWxlKCIgKyBzY2FsZV9mYWN0b3IgKyAiLCIgKyBzY2FsZV9mYWN0b3JfeSArICIpIjsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGNvbnN0IGZpbmRFbGVtZW50QnlTaXplID0gZnVuY3Rpb24gKGN1cnJlbnRFbGVtZW50LCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgPT09IGhlaWdodCAmJiBjdXJyZW50RWxlbWVudC5vZmZzZXRXaWR0aCA9PT0gd2lkdGgpIHsKICAgICAgICAgICAgICAgIGVsZW1lbnRUb1NjYWxlID0gY3VycmVudEVsZW1lbnQ7CiAgICAgICAgICAgICAgICBlbGVtZW50VG9TY2FsZUZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJlbnRFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAmJiAhZWxlbWVudFRvU2NhbGVGb3VuZDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZmluZEVsZW1lbnRCeVNpemUoY3VycmVudEVsZW1lbnQuY2hpbGRyZW5baV0sIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zdCB1cGRhdGVDcmVhdGl2ZVNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkgewogICAgICAgICAgICBlbGVtZW50VG9TY2FsZSA9IG51bGw7CiAgICAgICAgICAgIGVsZW1lbnRUb1NjYWxlRm91bmQgPSBmYWxzZTsKICAgICAgICAgICAgbGV0IHBhcmVudF9oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICAgIGxldCBwYXJlbnRfd2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgbGV0IGFkX2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoeWJpZC1hZCcpOwogICAgICAgICAgICBmaW5kRWxlbWVudEJ5U2l6ZShhZF9jb250YWluZXIsIDMyMCwgNDgwKTsKCiAgICAgICAgICAgIGlmIChlbGVtZW50VG9TY2FsZUZvdW5kICYmIGVsZW1lbnRUb1NjYWxlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGNyZWF0aXZlUmVzaXplKHBhcmVudF93aWR0aCwgcGFyZW50X2hlaWdodCwgZWxlbWVudFRvU2NhbGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQ=="

    .line 95
    invoke-static {v6, v7}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    move-result-object v6

    .line 96
    new-instance v8, Ljava/lang/String;

    invoke-direct {v8, v6}, Ljava/lang/String;-><init>([B)V

    .line 97
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6, v3}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    const-string v3, "<head[^>]*>"

    .line 101
    invoke-static {v3, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    move-result-object v2

    .line 102
    invoke-virtual {v2, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    move-result-object v2

    .line 104
    invoke-virtual {v2, v7}, Ljava/util/regex/Matcher;->find(I)Z

    move-result v3

    if-eqz v3, :cond_4

    .line 106
    new-instance v3, Ljava/lang/StringBuilder;

    const-string v6, "<style>"

    invoke-direct {v3, v6}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v6, "body { margin:0; padding:0;}"

    invoke-virtual {v3, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v6, "*:not(input) { -webkit-touch-callout:none; -webkit-user-select:none; -webkit-text-size-adjust:none; }"

    invoke-virtual {v3, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v6, "</style>"

    invoke-virtual {v3, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 111
    invoke-virtual {v2}, Ljava/util/regex/Matcher;->end()I

    move-result v2

    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v7, "<meta name=\'viewport\' content=\'width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\' />"

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p0

    invoke-virtual {v0, v2, p0}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 115
    :cond_4
    invoke-virtual {v0}, Ljava/lang/StringBuffer;->toString()Ljava/lang/String;

    move-result-object p0

    return-object p0
.end method
